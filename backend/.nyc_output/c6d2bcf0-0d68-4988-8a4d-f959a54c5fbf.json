{"/Users/user/Documents/GitHub/firefly/backend/testSetup.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/testSetup.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":51}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":55}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":45}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":48}},"9":{"start":{"line":12,"column":66},"end":{"line":12,"column":77}},"10":{"start":{"line":13,"column":15},"end":{"line":13,"column":51}},"11":{"start":{"line":14,"column":19},"end":{"line":19,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":18,"column":5}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":46}},"14":{"start":{"line":17,"column":8},"end":{"line":17,"column":64}},"15":{"start":{"line":20,"column":17},"end":{"line":26,"column":1}},"16":{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},"17":{"start":{"line":22,"column":32},"end":{"line":22,"column":61}},"18":{"start":{"line":23,"column":25},"end":{"line":23,"column":138}},"19":{"start":{"line":23,"column":70},"end":{"line":23,"column":137}},"20":{"start":{"line":24,"column":8},"end":{"line":24,"column":36}},"21":{"start":{"line":27,"column":0},"end":{"line":41,"column":3}},"22":{"start":{"line":28,"column":4},"end":{"line":40,"column":5}},"23":{"start":{"line":29,"column":8},"end":{"line":35,"column":9}},"24":{"start":{"line":30,"column":12},"end":{"line":33,"column":15}},"25":{"start":{"line":34,"column":12},"end":{"line":34,"column":76}},"26":{"start":{"line":38,"column":8},"end":{"line":38,"column":61}},"27":{"start":{"line":39,"column":8},"end":{"line":39,"column":20}},"28":{"start":{"line":42,"column":0},"end":{"line":45,"column":3}},"29":{"start":{"line":43,"column":4},"end":{"line":43,"column":21}},"30":{"start":{"line":44,"column":4},"end":{"line":44,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":19},"end":{"line":14,"column":20}},"loc":{"start":{"line":14,"column":31},"end":{"line":19,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":17},"end":{"line":20,"column":18}},"loc":{"start":{"line":20,"column":29},"end":{"line":26,"column":1}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":54},"end":{"line":23,"column":55}},"loc":{"start":{"line":23,"column":70},"end":{"line":23,"column":137}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":27,"column":7},"end":{"line":27,"column":8}},"loc":{"start":{"line":27,"column":25},"end":{"line":41,"column":1}},"line":27},"5":{"name":"(anonymous_5)","decl":{"start":{"line":42,"column":6},"end":{"line":42,"column":7}},"loc":{"start":{"line":42,"column":24},"end":{"line":45,"column":1}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":15,"column":4},"end":{"line":18,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":18,"column":5}},{"start":{},"end":{}}],"line":15},"4":{"loc":{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},{"start":{},"end":{}}],"line":21},"5":{"loc":{"start":{"line":29,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":35,"column":9}},{"start":{},"end":{}}],"line":29}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0},"f":{"0":2,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/testSetup.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/testSetup.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAChC,oDAA4B;AAC5B,wDAAyD;AAEzD,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,kBAAQ,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AACnC,kBAAQ,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;AAEtC,MAAM,EAAE,yBAAyB,EAAE,0BAA0B,EAAE,GAAG,OAAO,CAAC,GAAG,CAAA;AAC7E,MAAM,MAAM,GAAG,IAAI,mBAAU,CAAC,WAAW,CAAC,CAAC;AAI3C,MAAM,UAAU,GAAG,KAAK,IAAI,EAAE;IAC1B,IAAI,kBAAQ,CAAC,UAAU,CAAC,UAAU,KAAK,CAAC,EAAE,CAAC;QACvC,MAAM,kBAAQ,CAAC,UAAU,EAAE,CAAC;QAC5B,MAAM,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;IAC5D,CAAC;AACL,CAAC,CAAC;AAKF,MAAM,QAAQ,GAAG,KAAK,IAAI,EAAE;IACxB,IAAI,kBAAQ,CAAC,UAAU,CAAC,UAAU,KAAK,CAAC,EAAE,CAAC;QACvC,MAAM,EAAE,WAAW,EAAE,GAAG,kBAAQ,CAAC,UAAU,CAAC;QAC5C,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CACzD,kBAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAC5D,CAAC;QACF,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAChC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,CAAC,KAAK;IAIR,IAAI,CAAC;QACD,IAAI,kBAAQ,CAAC,UAAU,CAAC,UAAU,KAAK,CAAC,EAAE,CAAC;YACvC,MAAM,kBAAQ,CAAC,OAAO,CAAC,yBAA0B,EAAE;gBAC/C,MAAM,EAAE,0BAA0B;gBAClC,wBAAwB,EAAE,KAAK;aAClC,CAAC,CAAC;YACH,MAAM,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAC,KAAK,EAAE,cAAc,EAAC,CAAC,CAAC;QAClE,CAAC;IACL,CAAC;IAAC,OAAO,KAAU,EAAE,CAAC;QAClB,MAAM,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC;QACrD,MAAM,KAAK,CAAC;IAChB,CAAC;AACL,CAAC,CAAC,CAAA;AAEF,KAAK,CAAC,KAAK;IACP,MAAM,QAAQ,EAAE,CAAC;IACjB,MAAM,UAAU,EAAE,CAAC;AACvB,CAAC,CAAC,CAAC","sourcesContent":["import mongoose from \"mongoose\";\nimport dotenv from \"dotenv\";\nimport { LoggerImpl } from \"../backend/src/utils/logger\";\n\ndotenv.config();\n\nmongoose.set('strictQuery', false);\nmongoose.set('bufferCommands', false);\n\nconst { FIREFLY_TEST_DATABASE_URL, FIREFLY_TEST_DATABASE_NAME } = process.env\nconst logger = new LoggerImpl('TestSetup');\n/**\n * Disconnect test database during teardowns\n */\nconst disconnect = async () => {\n    if (mongoose.connection.readyState !== 0) {\n        await mongoose.disconnect();\n        logger.info(\"Disconnected from MongoDB after testing.\");\n    }\n};\n\n/**\n * Deletes all collections [it is meant for the test databases during teardowns]\n */\nconst truncate = async () => {\n    if (mongoose.connection.readyState !== 0) {\n        const { collections } = mongoose.connection;\n        const promises = Object.keys(collections).map((collection) =>\n            mongoose.connection.collection(collection).deleteMany({})\n        );\n        await Promise.all(promises);\n    }\n};\n\nbefore(async function () {\n/**\n * Connect to database\n */\n    try {\n        if (mongoose.connection.readyState === 0) {\n            await mongoose.connect(FIREFLY_TEST_DATABASE_URL!, {\n                dbName: FIREFLY_TEST_DATABASE_NAME,\n                serverSelectionTimeoutMS: 30000\n            });\n            logger.info(\"Connected to database\", {trace: 'testSetup.ts'});\n        }\n    } catch (error: any) {\n        logger.error(\"Failed to connect to MongoDB:\", error);\n        throw error; // Ensure Mocha knows about the failure\n    }\n})\n\nafter(async function () {\n    await truncate();\n    await disconnect();\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c7c6564e362733dc660536d36fac7d1e6f5a9c02","contentHash":"851c28e8e3d617d774c8b6f275391628becf79ec98f153880a57f1d916ee3fc1"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/logger.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/logger.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":61}},"5":{"start":{"line":10,"column":8},"end":{"line":13,"column":11}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":40}},"7":{"start":{"line":19,"column":8},"end":{"line":19,"column":48}},"8":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"9":{"start":{"line":25,"column":8},"end":{"line":25,"column":41}},"10":{"start":{"line":28,"column":0},"end":{"line":28,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":25},"end":{"line":14,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":24},"end":{"line":17,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":32},"end":{"line":20,"column":5}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":24},"end":{"line":23,"column":5}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":25},"end":{"line":26,"column":5}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":0,"7":0,"8":0,"9":0,"10":1},"f":{"0":1,"1":4,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/logger.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/logger.ts"],"names":[],"mappings":";;;;;;AAAA,8DAAsC;AAEtC,MAAa,UAAU;IAGrB,YAAY,OAAe;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,gBAAM,CAAC;YACvB,WAAW,EAAE,gBAAgB;YAC7B,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;IACL,CAAC;IAEM,IAAI,CAAC,OAAe,EAAE,IAAU;QACrC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;IAEM,KAAK,CAAC,OAAe,EAAE,KAAa,EAAE,IAAU;QACrD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IAC1C,CAAC;IAEM,IAAI,CAAC,OAAe,EAAE,IAAU;QACrC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;IAEM,KAAK,CAAC,OAAe,EAAE,IAAU;QACtC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACnC,CAAC;CACF;AAzBD,gCAyBC","sourcesContent":["import Logger from \"../config/logger\";\n\nexport class LoggerImpl {\n  private readonly logger: Logger;\n\n  constructor(context: string) {\n    this.logger = new Logger({ \n      serviceName: 'FireflyBackend',\n      context: context \n    });\n  }\n\n  public info(message: string, meta?: any) {\n    this.logger.info(message, meta);\n  }\n\n  public error(message: string, error?: Error, meta?: any) {\n    this.logger.error(message, error, meta);\n  }\n  \n  public warn(message: string, meta?: any) {\n    this.logger.warn(message, meta);\n  }\n\n  public debug(message: string, meta?: any) {\n    this.logger.debug(message, meta);\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"58c16bd281dd45117a57506d02bfc1901f2f224d","contentHash":"aad711bc42a38e42785aeb67de46c6aa1bbf09cd9c9e5ef3bca97369379ca725"},"/Users/user/Documents/GitHub/firefly/backend/src/config/logger.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/logger.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":36},"end":{"line":7,"column":89}},"5":{"start":{"line":8,"column":16},"end":{"line":8,"column":49}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":66}},"7":{"start":{"line":10,"column":18},"end":{"line":18,"column":36}},"8":{"start":{"line":11,"column":17},"end":{"line":11,"column":75}},"9":{"start":{"line":12,"column":53},"end":{"line":12,"column":57}},"10":{"start":{"line":13,"column":23},"end":{"line":13,"column":52}},"11":{"start":{"line":14,"column":4},"end":{"line":16,"column":5}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":177}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":64}},"14":{"start":{"line":19,"column":33},"end":{"line":26,"column":2}},"15":{"start":{"line":27,"column":34},"end":{"line":34,"column":2}},"16":{"start":{"line":35,"column":19},"end":{"line":114,"column":1}},"17":{"start":{"line":37,"column":33},"end":{"line":37,"column":39}},"18":{"start":{"line":38,"column":4},"end":{"line":112,"column":5}},"19":{"start":{"line":40,"column":12},"end":{"line":49,"column":15}},"20":{"start":{"line":50,"column":12},"end":{"line":50,"column":18}},"21":{"start":{"line":52,"column":12},"end":{"line":64,"column":15}},"22":{"start":{"line":65,"column":12},"end":{"line":65,"column":18}},"23":{"start":{"line":67,"column":12},"end":{"line":79,"column":15}},"24":{"start":{"line":80,"column":12},"end":{"line":80,"column":18}},"25":{"start":{"line":82,"column":12},"end":{"line":96,"column":15}},"26":{"start":{"line":97,"column":12},"end":{"line":97,"column":18}},"27":{"start":{"line":99,"column":12},"end":{"line":111,"column":15}},"28":{"start":{"line":113,"column":4},"end":{"line":113,"column":18}},"29":{"start":{"line":117,"column":57},"end":{"line":117,"column":63}},"30":{"start":{"line":118,"column":8},"end":{"line":118,"column":31}},"31":{"start":{"line":119,"column":8},"end":{"line":123,"column":11}},"32":{"start":{"line":126,"column":8},"end":{"line":129,"column":10}},"33":{"start":{"line":132,"column":8},"end":{"line":132,"column":57}},"34":{"start":{"line":135,"column":8},"end":{"line":144,"column":12}},"35":{"start":{"line":147,"column":8},"end":{"line":147,"column":57}},"36":{"start":{"line":150,"column":8},"end":{"line":150,"column":58}},"37":{"start":{"line":153,"column":8},"end":{"line":153,"column":31}},"38":{"start":{"line":156,"column":0},"end":{"line":156,"column":25}},"39":{"start":{"line":157,"column":15},"end":{"line":160,"column":2}},"40":{"start":{"line":161,"column":0},"end":{"line":161,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":133},"end":{"line":10,"column":134}},"loc":{"start":{"line":10,"column":143},"end":{"line":18,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":35,"column":19},"end":{"line":35,"column":20}},"loc":{"start":{"line":35,"column":31},"end":{"line":114,"column":1}},"line":35},"3":{"name":"(anonymous_3)","decl":{"start":{"line":116,"column":4},"end":{"line":116,"column":5}},"loc":{"start":{"line":116,"column":24},"end":{"line":124,"column":5}},"line":116},"4":{"name":"(anonymous_4)","decl":{"start":{"line":125,"column":4},"end":{"line":125,"column":5}},"loc":{"start":{"line":125,"column":21},"end":{"line":130,"column":5}},"line":125},"5":{"name":"(anonymous_5)","decl":{"start":{"line":131,"column":4},"end":{"line":131,"column":5}},"loc":{"start":{"line":131,"column":24},"end":{"line":133,"column":5}},"line":131},"6":{"name":"(anonymous_6)","decl":{"start":{"line":134,"column":4},"end":{"line":134,"column":5}},"loc":{"start":{"line":134,"column":32},"end":{"line":145,"column":5}},"line":134},"7":{"name":"(anonymous_7)","decl":{"start":{"line":146,"column":4},"end":{"line":146,"column":5}},"loc":{"start":{"line":146,"column":24},"end":{"line":148,"column":5}},"line":146},"8":{"name":"(anonymous_8)","decl":{"start":{"line":149,"column":4},"end":{"line":149,"column":5}},"loc":{"start":{"line":149,"column":25},"end":{"line":151,"column":5}},"line":149},"9":{"name":"(anonymous_9)","decl":{"start":{"line":152,"column":4},"end":{"line":152,"column":5}},"loc":{"start":{"line":152,"column":24},"end":{"line":154,"column":5}},"line":152}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":52}},"type":"cond-expr","locations":[{"start":{"line":13,"column":33},"end":{"line":13,"column":47}},{"start":{"line":13,"column":50},"end":{"line":13,"column":52}}],"line":13},"4":{"loc":{"start":{"line":14,"column":4},"end":{"line":16,"column":5}},"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":16,"column":5}},{"start":{},"end":{}}],"line":14},"5":{"loc":{"start":{"line":15,"column":57},"end":{"line":15,"column":109}},"type":"cond-expr","locations":[{"start":{"line":15,"column":72},"end":{"line":15,"column":99}},{"start":{"line":15,"column":102},"end":{"line":15,"column":109}}],"line":15},"6":{"loc":{"start":{"line":15,"column":113},"end":{"line":15,"column":174}},"type":"cond-expr","locations":[{"start":{"line":15,"column":143},"end":{"line":15,"column":169}},{"start":{"line":15,"column":172},"end":{"line":15,"column":174}}],"line":15},"7":{"loc":{"start":{"line":15,"column":113},"end":{"line":15,"column":140}},"type":"binary-expr","locations":[{"start":{"line":15,"column":113},"end":{"line":15,"column":125}},{"start":{"line":15,"column":129},"end":{"line":15,"column":140}}],"line":15},"8":{"loc":{"start":{"line":38,"column":4},"end":{"line":112,"column":5}},"type":"switch","locations":[{"start":{"line":39,"column":8},"end":{"line":50,"column":18}},{"start":{"line":51,"column":8},"end":{"line":65,"column":18}},{"start":{"line":66,"column":8},"end":{"line":80,"column":18}},{"start":{"line":81,"column":8},"end":{"line":97,"column":18}},{"start":{"line":98,"column":8},"end":{"line":111,"column":15}}],"line":38},"9":{"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":30}},"type":"default-arg","locations":[{"start":{"line":117,"column":24},"end":{"line":117,"column":30}}],"line":117},"10":{"loc":{"start":{"line":128,"column":16},"end":{"line":128,"column":57}},"type":"binary-expr","locations":[{"start":{"line":128,"column":16},"end":{"line":128,"column":28}},{"start":{"line":128,"column":32},"end":{"line":128,"column":57}}],"line":128},"11":{"loc":{"start":{"line":136,"column":16},"end":{"line":142,"column":13}},"type":"binary-expr","locations":[{"start":{"line":136,"column":16},"end":{"line":136,"column":21}},{"start":{"line":136,"column":25},"end":{"line":142,"column":13}}],"line":136}},"s":{"0":1,"1":4,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":4,"9":4,"10":4,"11":4,"12":0,"13":4,"14":1,"15":1,"16":1,"17":5,"18":5,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":5,"26":5,"27":0,"28":5,"29":5,"30":5,"31":5,"32":2,"33":2,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":1},"f":{"0":4,"1":4,"2":5,"3":5,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0},"b":{"0":[1,1,1],"1":[1,3],"2":[4,4],"3":[0,4],"4":[0,4],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,5,0],"9":[5],"10":[2,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/logger.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/logger.ts"],"names":[],"mappings":"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","sourcesContent":["import winston, { Logger as WinstonLogger } from 'winston';\nimport DailyRotateFile from 'winston-daily-rotate-file';\nimport dayjs from 'dayjs';\nimport Env from '../utils/envholder';\n\nexport interface LoggerConfig {\n  level?: string;\n  serviceName?: string;\n  env?: string;\n  context?: string;\n}\n\nconst logFormat = winston.format.combine(\n  winston.format.errors({ stack: true }),\n  winston.format.printf((info: any) => {\n    const time = `${dayjs().format('YYYY-MM-DD, HH:mm:ss')}`;\n    const { level, message, stack, code, context } = info;\n    \n    // Add context to the log message if it exists\n    const contextStr = context ? `[${context}]` : '';\n\n    if (level == 'error') {\n      return `[❌❌❌ ${level}] [${time}] ${contextStr} ${\n        code != null ? `[${code}] -> [${message}]` : message\n      } ${code == null || code >= 500 ? `$[ERR_STACK] -> ${stack}` : ''}`;\n    }\n\n    return `[${time}] | [${level}] ${contextStr} -> ${message}`;\n  }),\n  winston.format.json(),\n);\n\nconst infoLogRotationTransport = new DailyRotateFile({\n  filename: './/logs//info',\n  zippedArchive: true,\n  maxSize: '10m',\n  maxFiles: '80d',\n  level: 'info',\n  extension: '.log'\n});\n\nconst errorLogRotationTransport = new DailyRotateFile({\n  filename: './/logs//error',\n  zippedArchive: true,\n  maxSize: '10m',\n  maxFiles: '80d',\n  level: 'error',\n  extension: '.log'\n});\n\nconst loggerInfo = (config: LoggerConfig) => {\n  let logger;\n  const { env, serviceName } = config;\n  \n  switch (env) {\n    case 'production':\n      logger = winston.createLogger({\n        level: 'info',\n        format: logFormat,\n        defaultMeta: { service: serviceName },\n        transports: [\n          infoLogRotationTransport,\n          errorLogRotationTransport\n        ],\n        exitOnError: false\n      });\n      break;\n    case 'development':\n      logger = winston.createLogger({\n        level: 'info',\n        format: logFormat,\n        defaultMeta: { service: serviceName },\n        transports: [\n          infoLogRotationTransport,\n          errorLogRotationTransport,\n          new winston.transports.Console({\n            format: winston.format.combine(\n              winston.format.colorize(),\n              winston.format.simple()\n            )\n          })\n        ],\n        exitOnError: false\n      });\n      break;\n    case 'staging':\n      logger = winston.createLogger({\n        level: 'info',\n        format: logFormat,\n        defaultMeta: { service: serviceName },\n        transports: [\n          infoLogRotationTransport,\n          errorLogRotationTransport,\n          new winston.transports.Console({\n            format: winston.format.combine(\n              winston.format.colorize(),\n              winston.format.simple()\n            )\n          })\n        ],\n        exitOnError: false\n      });\n      break;\n    case 'test':\n      logger = winston.createLogger({\n        level: 'info',\n        format: logFormat,\n        defaultMeta: { service: serviceName },\n        transports: [\n          infoLogRotationTransport,\n          errorLogRotationTransport,\n          new winston.transports.File({\n            filename: 'logs/error.log',\n            maxsize: 500,\n            format: logFormat\n          })\n        ],\n        exitOnError: false\n      });\n      break;\n    default:\n      logger = winston.createLogger({\n        level: 'info',\n        format: logFormat,\n        defaultMeta: { service: serviceName },\n        transports: [\n          infoLogRotationTransport,\n          errorLogRotationTransport,\n          new winston.transports.Console({\n            format: winston.format.combine(\n              winston.format.colorize(),\n              winston.format.simple()\n            )\n          })\n        ],\n        exitOnError: false\n      });\n  }\n  \n  return logger;\n};\n\nclass Logger {\n  private logger: WinstonLogger;\n  private context?: string;\n\n  constructor(config: LoggerConfig) {\n    const { \n      level = 'info', \n      serviceName,\n      context\n    } = config;\n\n    this.context = context;\n    this.logger = loggerInfo({ \n      env: Env.get<string>('NODE_ENV'), \n      serviceName, \n      level \n    });\n  }\n\n  // Add context to metadata\n  private addContext(meta?: Record<string, any>): Record<string, any> {\n    return {\n      ...meta,\n      ...(this.context && { context: this.context })\n    };\n  }\n\n  info(message: string, meta?: Record<string, any>): void {\n    this.logger.info(message, this.addContext(meta));\n  }\n\n  error(message: string, error?: Error, meta?: Record<string, any>): void {\n    this.logger.error(message, this.addContext({ \n      ...(error && { \n        error: { \n          name: error.name, \n          message: error.message, \n          stack: error.stack \n        } \n      }),\n      ...meta\n    }));\n  }\n\n  warn(message: string, meta?: Record<string, any>): void {\n    this.logger.warn(message, this.addContext(meta));\n  }\n\n  debug(message: string, meta?: Record<string, any>): void {\n    this.logger.debug(message, this.addContext(meta));\n  }\n\n  // Method to change context dynamically if needed\n  setContext(context: string): void {\n    this.context = context;\n  }\n}\n\nexport default Logger;\n\nconst logger = new Logger({\n  serviceName: 'pokemon-backend',\n  env: Env.get<string>('NODE_ENV'),\n});\ndeclare global {\n  // eslint-disable-next-line no-var\n  var logger: Logger;\n}\nglobal.logger = logger;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"36d0fa59f19df2eeb3fbb4032f117c69989ba5b7","contentHash":"049958a5e9bef365ec7ec198db5cea80e9a07a68669126a869d00625f2e77a36"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/envholder.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/envholder.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":34}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}},"6":{"start":{"line":11,"column":8},"end":{"line":16,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":84}},"8":{"start":{"line":15,"column":12},"end":{"line":15,"column":20}},"9":{"start":{"line":19,"column":8},"end":{"line":20,"column":42}},"10":{"start":{"line":20,"column":12},"end":{"line":20,"column":42}},"11":{"start":{"line":21,"column":8},"end":{"line":21,"column":34}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":47},"end":{"line":17,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":20},"end":{"line":22,"column":5}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":19,"column":8},"end":{"line":20,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":20,"column":42}},{"start":{},"end":{}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":6,"10":0,"11":6,"12":1},"f":{"0":1,"1":0,"2":6},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,6]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/envholder.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/envholder.ts"],"names":[],"mappings":";;;;;AAAA,mCAAsC;AAEtC,wDAAmC;AAEnC,IAAA,qBAAY,GAAE,CAAC;AAEf,MAAqB,GAAG;IAGf,MAAM,CAAC,KAAK,CAAC,WAAW,CAAI,gBAAqC;QAEtE,IAAI,CAAC;YACH,IAAI,CAAC,YAAY,GAAG,MAAM,gBAAgB,CAAC,aAAa,CAAC,aAAM,CAAC,CAAC;QACnE,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,MAAM,CAAC,CAAC;QACV,CAAC;IACH,CAAC;IAEM,MAAM,CAAC,GAAG,CAAa,GAAW;QACvC,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI;YAAE,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAM,CAAC;QACzE,OAAQ,aAAc,CAAC,GAAG,CAAM,CAAC;IACnC,CAAC;CACF;AAhBD,sBAgBC","sourcesContent":["import { configDotenv } from 'dotenv';\nimport Joi from 'joi';\nimport config from '../config/env';\n\nconfigDotenv();\n\nexport default class Env {\n  private static validatedEnv: any;\n\n  public static async validateEnv<T>(validationSchema: Joi.ObjectSchema<T>) {\n    // eslint-disable-next-line no-useless-catch\n    try {\n      this.validatedEnv = await validationSchema.validateAsync(config);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  public static get<T = string>(key: string) {\n    if (this.validatedEnv?.[key] != null) return this.validatedEnv[key] as T;\n    return (config as any)[key] as T;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7a8cb4382bff3260264b377dc9384857d0fedc36","contentHash":"4a0cdc96b0dc10e20e36ee62be0a22fbc69d0f705d11be12d45447e24f9e8754"},"/Users/user/Documents/GitHub/firefly/backend/src/config/env/index.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":22},"end":{"line":6,"column":63}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":49}},"6":{"start":{"line":9,"column":0},"end":{"line":14,"column":49}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":47}},"type":"binary-expr","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":30}},{"start":{"line":14,"column":34},"end":{"line":14,"column":47}}],"line":14}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[1,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/index.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/env/index.ts"],"names":[],"mappings":";;;;;AAAA,gEAAwC;AACxC,8DAAsC;AACtC,kDAA0B;AAE1B,kBAAe;IACb,WAAW,EAAX,qBAAW;IACX,UAAU,EAAV,oBAAU;IACV,IAAI,EAAJ,cAAI;IACJ,OAAO,EAAE,cAAI;CACd,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,IAAI,aAAa,CAAC,CAAC","sourcesContent":["import development from './development';\nimport production from './production';\nimport test from './test';\n\nexport default {\n  development,\n  production,\n  test,\n  staging: test,\n}[process.env.FIREFLY_NODE_ENV || 'development'];"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3e099103495a5e49ea1c0e33300ecdd0a76b5394","contentHash":"3f3acee38f4749c7def12342c9277955eac6b14bcebc0138787608a43a3f37da"},"/Users/user/Documents/GitHub/firefly/backend/src/config/env/development.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/development.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":20},"end":{"line":10,"column":1}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/development.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/env/development.ts"],"names":[],"mappings":";;AAAA,mCAAsC;AACtC,IAAA,qBAAY,GAAE,CAAC;AAEf,MAAM,WAAW,GAAG;IAClB,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,gBAAgB;IACtC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY;IAC9B,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa;IACxC,YAAY,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY;CACvC,CAAA;AAED,kBAAe,WAAW,CAAC","sourcesContent":["import { configDotenv } from 'dotenv';\nconfigDotenv();\n\nconst development = {\n  NODE_ENV: process.env.FIREFLY_NODE_ENV,\n  PORT: process.env.FIREFLY_PORT,\n  DATABASE_NAME: process.env.DATABASE_NAME,\n  DATABASE_URL: process.env.DATABASE_URL,\n}\n\nexport default development;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"00274df85a235c6dd70412eed92e468bbf8b6971","contentHash":"105591f5fcab8106fc86793aaab8291b0e2c82fd867c59606c1641eb0ce12108"},"/Users/user/Documents/GitHub/firefly/backend/src/config/env/production.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/production.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":19},"end":{"line":10,"column":1}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/production.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/env/production.ts"],"names":[],"mappings":";;AAAA,mCAAsC;AACtC,IAAA,qBAAY,GAAE,CAAC;AAEf,MAAM,UAAU,GAAG;IACjB,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,kBAAkB;IACxC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY;IAC9B,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa;IACxC,YAAY,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY;CACvC,CAAA;AAED,kBAAe,UAAU,CAAC","sourcesContent":["import { configDotenv } from 'dotenv';\nconfigDotenv();\n\nconst production = {\n  NODE_ENV: process.env.STASHWISE_NODE_ENV,\n  PORT: process.env.FIREFLY_PORT,\n  DATABASE_NAME: process.env.DATABASE_NAME,\n  DATABASE_URL: process.env.DATABASE_URL,\n}\n\nexport default production;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3d3ef35377885eb02ea219289bd33a02568f000e","contentHash":"4bdaf9ab2487f2baae81085fe5077c87d6c4581859a0957d10f17132735dd4a9"},"/Users/user/Documents/GitHub/firefly/backend/src/config/env/test.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/test.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":13},"end":{"line":10,"column":1}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":23}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/env/test.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/env/test.ts"],"names":[],"mappings":";;AAAA,mCAAsC;AACtC,IAAA,qBAAY,GAAE,CAAC;AAEf,MAAM,IAAI,GAAG;IACX,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,gBAAgB;IACtC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY;IAC9B,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa;IACxC,YAAY,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY;CACvC,CAAA;AAED,kBAAe,IAAI,CAAC","sourcesContent":["import { configDotenv } from 'dotenv';\nconfigDotenv();\n\nconst test = {\n  NODE_ENV: process.env.FIREFLY_NODE_ENV,\n  PORT: process.env.FIREFLY_PORT,\n  DATABASE_NAME: process.env.DATABASE_NAME,\n  DATABASE_URL: process.env.DATABASE_URL,\n}\n\nexport default test;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d9421421a75207c3f3f1e4c0a84fd7b885c3fd1a","contentHash":"9c286db465ba04ee0b58a4bedce0536845b60c09292c2f7d4a8699a278a7f46b"},"/Users/user/Documents/GitHub/firefly/backend/src/config/express.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/express.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":47}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":51}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":51}},"7":{"start":{"line":10,"column":31},"end":{"line":10,"column":79}},"8":{"start":{"line":11,"column":22},"end":{"line":11,"column":61}},"9":{"start":{"line":12,"column":42},"end":{"line":12,"column":98}},"10":{"start":{"line":13,"column":17},"end":{"line":13,"column":37}},"11":{"start":{"line":14,"column":15},"end":{"line":14,"column":32}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":31}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":84}},"14":{"start":{"line":17,"column":12},"end":{"line":17,"column":36}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":34}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":58}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":38}},"18":{"start":{"line":21,"column":0},"end":{"line":21,"column":49}},"19":{"start":{"line":22,"column":0},"end":{"line":22,"column":44}},"20":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"21":{"start":{"line":24,"column":0},"end":{"line":24,"column":28}},"22":{"start":{"line":25,"column":0},"end":{"line":25,"column":38}},"23":{"start":{"line":26,"column":0},"end":{"line":26,"column":62}},"24":{"start":{"line":26,"column":31},"end":{"line":26,"column":60}},"25":{"start":{"line":27,"column":0},"end":{"line":27,"column":56}},"26":{"start":{"line":28,"column":0},"end":{"line":32,"column":4}},"27":{"start":{"line":28,"column":20},"end":{"line":32,"column":2}},"28":{"start":{"line":33,"column":0},"end":{"line":33,"column":72}},"29":{"start":{"line":34,"column":0},"end":{"line":34,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":26,"column":19},"end":{"line":26,"column":20}},"loc":{"start":{"line":26,"column":31},"end":{"line":26,"column":60}},"line":26},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":8},"end":{"line":28,"column":9}},"loc":{"start":{"line":28,"column":20},"end":{"line":32,"column":2}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":6,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":1,"26":1,"27":0,"28":1,"29":1},"f":{"0":6,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,6],"2":[6,6]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/express.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/express.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,gDAAwB;AACxB,oDAA4B;AAC5B,oDAA4B;AAC5B,gFAA6C;AAC7C,8DAAsC;AACtC,mGAA6F;AAC7F,sCAAiD;AACjD,iCAAqC;AAErC,+BAA6B;AAE7B,8BAAS,CAAC,QAAQ,CAAC,OAAO,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC;AAE/D,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;AACtB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAChD,GAAG,CAAC,GAAG,CAAC,IAAA,qBAAW,GAAE,CAAC,CAAC;AAEvB,GAAG,CAAC,GAAG,CAAC,IAAA,cAAI,EAAC,kBAAW,CAAC,CAAC,CAAC;AAE3B,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AAGlC,GAAG,CAAC,GAAG,CAAC,IAAA,gBAAM,GAAE,CAAC,CAAC;AAClB,GAAG,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;AAC5B,GAAG,CAAC,GAAG,CAAC,IAAA,gBAAM,EAAC,KAAK,CAAC,CAAC,CAAA;AAEtB,GAAG,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;AAE9D,GAAG,CAAC,GAAG,CAAC,mBAAU,CAAC,OAAO,EAAE,iBAAQ,CAAC,CAAC;AAEtC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,CACjB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;IACnB,MAAM,EAAE,OAAO;IACf,IAAI,EAAE,GAAG;IACT,OAAO,EAAE,oBAAoB;CAC9B,CAAC,CACH,CAAC;AAEF,GAAG,CAAC,GAAG,CAAC,8DAA4B,CAAC,CAAC;AAEtC,kBAAe,GAAG,CAAC","sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport morgan from 'morgan';\nimport paginator from \"mongoose-paginate-v2\";\nimport compression from 'compression';\nimport { GlobalErrorCatcherMiddleware } from '../middleware/global-error-catcher.middleware';\nimport { ROUTE_BASE, v1Router } from '../routes';\nimport { corsOptions } from './cors';\n\nimport '../helper/scheduler';\n\npaginator.paginate.options = { lean: true, leanWithId: false };\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\napp.use(compression());\n\napp.use(cors(corsOptions));\n\napp.use(express.static('public'));\n\n// Use helmet to secure Express headers\napp.use(helmet());\napp.disable('x-powered-by');\napp.use(morgan(\"dev\"))\n\napp.get('/health', (_, res) => res.json({ message: 'Okay' }));\n\napp.use(ROUTE_BASE.V1_PATH, v1Router);\n\napp.use((_, res) =>\n  res.status(404).json({\n    status: 'error',\n    code: 404,\n    message: 'Resource Not Found'\n  })\n);\n\napp.use(GlobalErrorCatcherMiddleware); // must be last applied middleware to catch globalErrs\n\nexport default app;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f09b37965b8b295a87af1032c0637f90e6a351cc","contentHash":"6a0e7baaf59e5261b189bff85053998dc7c878b0146619579779cc46a77bf144"},"/Users/user/Documents/GitHub/firefly/backend/src/middleware/global-error-catcher.middleware.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/global-error-catcher.middleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":68}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":43}},"3":{"start":{"line":6,"column":28},"end":{"line":6,"column":65}},"4":{"start":{"line":7,"column":4},"end":{"line":10,"column":5}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":54}},"6":{"start":{"line":9,"column":8},"end":{"line":9,"column":15}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":43}}},"fnMap":{"0":{"name":"GlobalErrorCatcherMiddleware","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":37}},"loc":{"start":{"line":5,"column":61},"end":{"line":12,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":4},"end":{"line":10,"column":5}},"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":10,"column":5}},{"start":{},"end":{}}],"line":7},"1":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":45}},"type":"binary-expr","locations":[{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},{"start":{"line":7,"column":29},"end":{"line":7,"column":45}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/global-error-catcher.middleware.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/middleware/global-error-catcher.middleware.ts"],"names":[],"mappings":";;AAGA,oEAcC;AAhBD,4CAAgD;AAEhD,SAAgB,4BAA4B,CAC1C,GAAQ,EACR,IAAa,EACb,GAAa,EAEb,KAAmB;IAEnB,MAAM,eAAe,GAAG,GAAG,YAAY,sBAAa,CAAC;IAErD,IAAI,GAAG,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC9C,OAAO;IACT,CAAC;IACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC","sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { HttpException } from '../utils/errors';\n\nexport function GlobalErrorCatcherMiddleware(\n  err: any,\n  _req: Request,\n  res: Response,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _next: NextFunction\n) {\n  const isHttpException = err instanceof HttpException;\n\n  if (err?.code == null || !isHttpException) {\n    res.status(500).send('Internal Server Error');\n    return;\n  }\n  res.status(err.code).send(err.message);\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"418bec8bfa1994599200ed7c19f40c7a8e176f55","contentHash":"a82090b76404e859a9413d53436c2965dd1647a65ba4c6157e7f26addc4fd322"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/errors.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/errors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":276}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":23}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":61}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":68}},"7":{"start":{"line":19,"column":8},"end":{"line":19,"column":59}},"8":{"start":{"line":22,"column":0},"end":{"line":22,"column":66}},"9":{"start":{"line":25,"column":8},"end":{"line":25,"column":48}},"10":{"start":{"line":28,"column":0},"end":{"line":28,"column":46}},"11":{"start":{"line":31,"column":8},"end":{"line":31,"column":51}},"12":{"start":{"line":34,"column":0},"end":{"line":34,"column":36}},"13":{"start":{"line":37,"column":8},"end":{"line":37,"column":49}},"14":{"start":{"line":40,"column":0},"end":{"line":40,"column":48}},"15":{"start":{"line":43,"column":8},"end":{"line":43,"column":52}},"16":{"start":{"line":46,"column":0},"end":{"line":46,"column":54}},"17":{"start":{"line":49,"column":8},"end":{"line":49,"column":49}},"18":{"start":{"line":52,"column":0},"end":{"line":52,"column":46}},"19":{"start":{"line":53,"column":26},"end":{"line":59,"column":1}},"20":{"start":{"line":54,"column":4},"end":{"line":58,"column":7}},"21":{"start":{"line":60,"column":0},"end":{"line":60,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":31},"end":{"line":8,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":31},"end":{"line":14,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":31},"end":{"line":20,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":31},"end":{"line":26,"column":5}},"line":24},"4":{"name":"(anonymous_4)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":31},"end":{"line":32,"column":5}},"line":30},"5":{"name":"(anonymous_5)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":31},"end":{"line":38,"column":5}},"line":36},"6":{"name":"(anonymous_6)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":31},"end":{"line":44,"column":5}},"line":42},"7":{"name":"(anonymous_7)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":31},"end":{"line":50,"column":5}},"line":48},"8":{"name":"(anonymous_8)","decl":{"start":{"line":53,"column":26},"end":{"line":53,"column":27}},"loc":{"start":{"line":53,"column":54},"end":{"line":59,"column":1}},"line":53}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":19},"end":{"line":13,"column":59}},"type":"binary-expr","locations":[{"start":{"line":13,"column":19},"end":{"line":13,"column":32}},{"start":{"line":13,"column":36},"end":{"line":13,"column":59}}],"line":13},"1":{"loc":{"start":{"line":19,"column":19},"end":{"line":19,"column":57}},"type":"binary-expr","locations":[{"start":{"line":19,"column":19},"end":{"line":19,"column":32}},{"start":{"line":19,"column":36},"end":{"line":19,"column":57}}],"line":19},"2":{"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":46}},"type":"binary-expr","locations":[{"start":{"line":25,"column":19},"end":{"line":25,"column":32}},{"start":{"line":25,"column":36},"end":{"line":25,"column":46}}],"line":25},"3":{"loc":{"start":{"line":31,"column":19},"end":{"line":31,"column":49}},"type":"binary-expr","locations":[{"start":{"line":31,"column":19},"end":{"line":31,"column":32}},{"start":{"line":31,"column":36},"end":{"line":31,"column":49}}],"line":31},"4":{"loc":{"start":{"line":37,"column":19},"end":{"line":37,"column":47}},"type":"binary-expr","locations":[{"start":{"line":37,"column":19},"end":{"line":37,"column":32}},{"start":{"line":37,"column":36},"end":{"line":37,"column":47}}],"line":37},"5":{"loc":{"start":{"line":43,"column":19},"end":{"line":43,"column":50}},"type":"binary-expr","locations":[{"start":{"line":43,"column":19},"end":{"line":43,"column":32}},{"start":{"line":43,"column":36},"end":{"line":43,"column":50}}],"line":43},"6":{"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":47}},"type":"binary-expr","locations":[{"start":{"line":49,"column":19},"end":{"line":49,"column":32}},{"start":{"line":49,"column":36},"end":{"line":49,"column":47}}],"line":49}},"s":{"0":1,"1":1,"2":0,"3":0,"4":1,"5":0,"6":1,"7":0,"8":1,"9":0,"10":1,"11":0,"12":1,"13":0,"14":1,"15":0,"16":1,"17":0,"18":1,"19":1,"20":0,"21":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/errors.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/errors.ts"],"names":[],"mappings":";;;AAEA,MAAa,aAAc,SAAQ,KAAK;IACtC,YAA4B,IAAY,EAAE,OAAe;QACvD,KAAK,CAAC,OAAO,CAAC,CAAC;QADW,SAAI,GAAJ,IAAI,CAAQ;IAExC,CAAC;CACF;AAJD,sCAIC;AAED,MAAa,4BAA6B,SAAQ,aAAa;IAC7D,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,uBAAuB,CAAC,CAAC;IACvD,CAAC;CACF;AAJD,oEAIC;AAED,MAAa,2BAA4B,SAAQ,aAAa;IAC5D,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,qBAAqB,CAAC,CAAC;IACrD,CAAC;CACF;AAJD,kEAIC;AAED,MAAa,iBAAkB,SAAQ,aAAa;IAClD,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,UAAU,CAAC,CAAC;IAC1C,CAAC;CACF;AAJD,8CAIC;AAED,MAAa,YAAa,SAAQ,aAAa;IAC7C,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,aAAa,CAAC,CAAC;IAC7C,CAAC;CACF;AAJD,oCAIC;AAED,MAAa,kBAAmB,SAAQ,aAAa;IACnD,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,WAAW,CAAC,CAAC;IAC3C,CAAC;CACF;AAJD,gDAIC;AAED,MAAa,qBAAsB,SAAQ,aAAa;IACtD,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,cAAc,CAAC,CAAC;IAC9C,CAAC;CACF;AAJD,sDAIC;AAED,MAAa,iBAAkB,SAAQ,aAAa;IAClD,YAAY,aAAsB;QAChC,KAAK,CAAC,GAAG,EAAE,aAAa,IAAI,WAAW,CAAC,CAAC;IAC3C,CAAC;CACF;AAJD,8CAIC;AAEM,MAAM,iBAAiB,GAAG,CAC/B,GAAa,EACb,KAAU,EACV,UAAkB,EAClB,EAAE;IACF,OAAO,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;QACjC,MAAM,EAAE,OAAO;QACf,UAAU,EAAE,UAAU;QACtB,OAAO,EAAE,KAAK,CAAC,OAAO;KACvB,CAAC,CAAC;AACL,CAAC,CAAC;AAVW,QAAA,iBAAiB,qBAU5B","sourcesContent":["import { Response } from 'express';\n\nexport class HttpException extends Error {\n  constructor(public readonly code: number, message: string) {\n    super(message);\n  }\n}\n\nexport class InternalServerErrorException extends HttpException {\n  constructor(customMessage?: string) {\n    super(500, customMessage ?? 'Internal Server Error');\n  }\n}\n\nexport class ServiceUnavailableException extends HttpException {\n  constructor(customMessage?: string) {\n    super(503, customMessage ?? 'Service Unavailable');\n  }\n}\n\nexport class ConflictException extends HttpException {\n  constructor(customMessage?: string) {\n    super(409, customMessage ?? 'Conflict');\n  }\n}\n\nexport class BadException extends HttpException {\n  constructor(customMessage?: string) {\n    super(400, customMessage ?? 'Bad Request');\n  }\n}\n\nexport class ForbiddenException extends HttpException {\n  constructor(customMessage?: string) {\n    super(403, customMessage ?? 'Forbidden');\n  }\n}\n\nexport class UnAuthorizedException extends HttpException {\n  constructor(customMessage?: string) {\n    super(401, customMessage ?? 'UNAUTHORIZED');\n  }\n}\n\nexport class NotFoundException extends HttpException {\n  constructor(customMessage?: string) {\n    super(404, customMessage ?? 'Not Found');\n  }\n}\n\nexport const handleCustomError = (\n  res: Response,\n  error: any,\n  statusCode: number\n) => {\n  return res.status(statusCode).json({\n    status: 'error',\n    statusCode: statusCode,\n    message: error.message\n  });\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cf045cbe2dd436ff5df3226ff23b87ec3ca86e81","contentHash":"fbf18e7387c7c1a7c9842f5e9b5ea20f7c0666432db3b28ba7a802b5c7e56674"},"/Users/user/Documents/GitHub/firefly/backend/src/routes/index.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/routes/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":19},"end":{"line":15,"column":1}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":126}},"13":{"start":{"line":14,"column":21},"end":{"line":14,"column":126}},"14":{"start":{"line":14,"column":95},"end":{"line":14,"column":126}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":62}},"16":{"start":{"line":17,"column":0},"end":{"line":17,"column":48}},"17":{"start":{"line":18,"column":0},"end":{"line":18,"column":39}},"18":{"start":{"line":19,"column":0},"end":{"line":19,"column":27}},"19":{"start":{"line":20,"column":0},"end":{"line":22,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":50},"end":{"line":13,"column":51}},"loc":{"start":{"line":13,"column":71},"end":{"line":15,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":19},"end":{"line":15,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":20},"end":{"line":13,"column":24}},{"start":{"line":13,"column":28},"end":{"line":13,"column":45}},{"start":{"line":13,"column":50},"end":{"line":15,"column":1}}],"line":13},"9":{"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":126}},"type":"if","locations":[{"start":{"line":14,"column":21},"end":{"line":14,"column":126}},{"start":{},"end":{}}],"line":14},"10":{"loc":{"start":{"line":14,"column":25},"end":{"line":14,"column":93}},"type":"binary-expr","locations":[{"start":{"line":14,"column":25},"end":{"line":14,"column":40}},{"start":{"line":14,"column":44},"end":{"line":14,"column":93}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1},"f":{"0":1,"1":1,"2":0,"3":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,0],"3":[1,0],"4":[1,1],"5":[0,1],"6":[1,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/routes/index.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/routes/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,uCAAqB;AAER,QAAA,SAAS,GAAG,MAAM,CAAC;AAEnB,QAAA,UAAU,GAAG;IACxB,OAAO,EAAE,GAAG,iBAAS,KAAK;CAC3B,CAAC","sourcesContent":["export * from './v1';\n\nexport const BASE_PATH = '/api';\n\nexport const ROUTE_BASE = {\n  V1_PATH: `${BASE_PATH}/v1`,\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d14fd9dc2c4cadb79cfbce6548b238fdb05e2b53","contentHash":"6cea39cc85bfc86d0ddf5db2478c1684aaa5999f370896a02a82f422bd6128f7"},"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/index.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":69}},"6":{"start":{"line":9,"column":27},"end":{"line":9,"column":73}},"7":{"start":{"line":10,"column":32},"end":{"line":10,"column":81}},"8":{"start":{"line":11,"column":23},"end":{"line":11,"column":65}},"9":{"start":{"line":12,"column":18},"end":{"line":12,"column":44}},"10":{"start":{"line":13,"column":0},"end":{"line":18,"column":3}},"11":{"start":{"line":14,"column":4},"end":{"line":17,"column":7}},"12":{"start":{"line":19,"column":0},"end":{"line":19,"column":100}},"13":{"start":{"line":20,"column":0},"end":{"line":20,"column":104}},"14":{"start":{"line":21,"column":0},"end":{"line":21,"column":91}},"15":{"start":{"line":22,"column":0},"end":{"line":22,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":19},"end":{"line":13,"column":20}},"loc":{"start":{"line":13,"column":34},"end":{"line":18,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":4,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":1,"14":1,"15":1},"f":{"0":4,"1":0},"b":{"0":[1,1,1],"1":[3,1],"2":[4,4]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/index.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/index.ts"],"names":[],"mappings":";;;;;;AAAA,sDAAqD;AACrD,sEAA6C;AAC7C,0EAAiD;AACjD,kFAA+D;AAC/D,kEAAyC;AAEzC,MAAM,SAAS,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEnC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,IAAa,EAAE,GAAa,EAAE,EAAE;IAClD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACnB,OAAO,EAAE,sFAAsF;QAC/F,OAAO,EAAE,CAAC;KACX,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,IAAA,6BAAK,EAAC,SAAS,CAAC,EAAE,wBAAa,CAAC,CAAC;AAC5D,SAAS,CAAC,GAAG,CAAC,aAAa,EAAE,IAAA,6BAAK,EAAC,SAAS,CAAC,EAAE,0BAAe,CAAC,CAAC;AAChE,SAAS,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAA,6BAAK,EAAC,KAAK,CAAC,EAAE,sBAAW,CAAC,CAAC;AAEtC,QAAA,QAAQ,GAAG,SAAS,CAAC","sourcesContent":["import express, { Request, Response } from 'express';\nimport pokemonRouter from './pokemon.routes';\nimport favouriteRouter from './favourite.routes';\nimport { limit } from '../../middleware/rate-limit.middleware';\nimport cacheRouter from './cache.routes';\n\nconst appRouter = express.Router();\n\nappRouter.get('/', (_req: Request, res: Response) => {\n  res.status(200).send({\n    message: `Hello from FireFly. Check the API specification for further guidance and next steps.`,\n    success: 1,\n  });\n});\n\nappRouter.use('/pokemons', limit('default'), pokemonRouter);\nappRouter.use('/favourites', limit('default'), favouriteRouter);\nappRouter.use('/cache', limit('api'), cacheRouter);\n\nexport const v1Router = appRouter;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"790f8cb83ddc0ba7f453de873ca78dd49cbb7a50","contentHash":"fb1cb979bc497d9fadf827b5828a4284a683770fbf540dea65f70a5fc9ef0b9e"},"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/pokemon.routes.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/pokemon.routes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"15":{"start":{"line":19,"column":18},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"17":{"start":{"line":21,"column":21},"end":{"line":21,"column":23}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":95}},"19":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"20":{"start":{"line":22,"column":77},"end":{"line":22,"column":95}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":22}},"22":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"23":{"start":{"line":27,"column":4},"end":{"line":33,"column":6}},"24":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"25":{"start":{"line":28,"column":35},"end":{"line":28,"column":46}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":23}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"28":{"start":{"line":30,"column":25},"end":{"line":30,"column":137}},"29":{"start":{"line":30,"column":38},"end":{"line":30,"column":50}},"30":{"start":{"line":30,"column":56},"end":{"line":30,"column":57}},"31":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"32":{"start":{"line":30,"column":102},"end":{"line":30,"column":137}},"33":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"34":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"35":{"start":{"line":35,"column":22},"end":{"line":37,"column":1}},"36":{"start":{"line":36,"column":4},"end":{"line":36,"column":62}},"37":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"38":{"start":{"line":39,"column":18},"end":{"line":39,"column":36}},"39":{"start":{"line":40,"column":29},"end":{"line":40,"column":93}},"40":{"start":{"line":41,"column":33},"end":{"line":41,"column":83}},"41":{"start":{"line":42,"column":25},"end":{"line":42,"column":86}},"42":{"start":{"line":43,"column":44},"end":{"line":43,"column":105}},"43":{"start":{"line":44,"column":22},"end":{"line":44,"column":45}},"44":{"start":{"line":45,"column":0},"end":{"line":45,"column":240}},"45":{"start":{"line":46,"column":0},"end":{"line":46,"column":253}},"46":{"start":{"line":47,"column":0},"end":{"line":47,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":51},"end":{"line":18,"column":52}},"loc":{"start":{"line":18,"column":63},"end":{"line":34,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":48},"end":{"line":20,"column":49}},"loc":{"start":{"line":20,"column":61},"end":{"line":24,"column":9}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":26},"end":{"line":33,"column":5}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":35,"column":56},"end":{"line":35,"column":57}},"loc":{"start":{"line":35,"column":71},"end":{"line":37,"column":1}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":34,"column":4}}],"line":18},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":24,"column":9}},"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":44}},{"start":{"line":20,"column":48},"end":{"line":24,"column":9}}],"line":20},"12":{"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"type":"if","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},{"start":{},"end":{}}],"line":22},"13":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},{"start":{},"end":{}}],"line":28},"14":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":15}},{"start":{"line":28,"column":19},"end":{"line":28,"column":33}}],"line":28},"15":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"16":{"loc":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"17":{"loc":{"start":{"line":35,"column":22},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":35,"column":23},"end":{"line":35,"column":27}},{"start":{"line":35,"column":31},"end":{"line":35,"column":51}},{"start":{"line":35,"column":56},"end":{"line":37,"column":1}}],"line":35},"18":{"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":61}},"type":"cond-expr","locations":[{"start":{"line":36,"column":37},"end":{"line":36,"column":40}},{"start":{"line":36,"column":43},"end":{"line":36,"column":61}}],"line":36},"19":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":33}},"type":"binary-expr","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":15}},{"start":{"line":36,"column":19},"end":{"line":36,"column":33}}],"line":36}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":1,"9":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,0],"12":[0,0],"13":[1,0],"14":[1,1],"15":[0,0],"16":[0,0],"17":[1,1,1],"18":[1,0],"19":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/pokemon.routes.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/pokemon.routes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAiC;AACjC,8FAAqE;AACrE,oFAA+E;AAC/E,uFAAyE;AACzE,0GAAoG;AAEpG,MAAM,aAAa,GAAG,IAAA,gBAAM,GAAE,CAAC;AAE/B,aAAa,CAAC,GAAG,CAAC,GAAG,EACjB,IAAA,kEAA8B,EAAC,gBAAgB,CAAC,mBAAmB,EAAE,OAAO,CAAC,EAC7E,IAAA,6CAAoB,EAAC,4BAAiB,CAAC,cAAc,CAAC,CACzD,CAAC;AACF,aAAa,CAAC,GAAG,CAAC,eAAe,EAC7B,IAAA,kEAA8B,EAAC,gBAAgB,CAAC,iBAAiB,EAAE,QAAQ,CAAC,EAC5E,IAAA,6CAAoB,EAAC,4BAAiB,CAAC,gBAAgB,CAAC,CAC3D,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["import { Router } from \"express\";\nimport pokemonController from \"../../controllers/pokemon.controller\";\nimport { WatchAsyncController } from \"../../middleware/watch-async-controller\";\nimport * as pokemonValidator from \"../../validators/favourite.validator\";\nimport { RequestBodyValidatorMiddleware } from \"../../middleware/request-body-validator.middleware\";\n\nconst pokemonRouter = Router();\n\npokemonRouter.get('/', \n    RequestBodyValidatorMiddleware(pokemonValidator.filterPokemonSchema, 'query'),\n    WatchAsyncController(pokemonController.getPokemonList)\n);\npokemonRouter.get('/:pokemonName', \n    RequestBodyValidatorMiddleware(pokemonValidator.pokemonNameSchema, 'params'),\n    WatchAsyncController(pokemonController.getPokemonByName)\n);\n\nexport default pokemonRouter;\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1466742ded09c8056e2255cc197f4d7eccd00640","contentHash":"938ffe43f0e1636bc465012f23b2dc6f1f02faa0c653c59d119675a58e333e87"},"/Users/user/Documents/GitHub/firefly/backend/src/controllers/pokemon.controller.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/controllers/pokemon.controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":28},"end":{"line":6,"column":56}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":81}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":47}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":45}},"7":{"start":{"line":12,"column":8},"end":{"line":17,"column":10}},"8":{"start":{"line":13,"column":30},"end":{"line":13,"column":33}},"9":{"start":{"line":14,"column":28},"end":{"line":14,"column":125}},"10":{"start":{"line":15,"column":32},"end":{"line":15,"column":81}},"11":{"start":{"line":16,"column":12},"end":{"line":16,"column":139}},"12":{"start":{"line":18,"column":8},"end":{"line":22,"column":10}},"13":{"start":{"line":19,"column":36},"end":{"line":19,"column":46}},"14":{"start":{"line":20,"column":28},"end":{"line":20,"column":83}},"15":{"start":{"line":21,"column":12},"end":{"line":21,"column":135}},"16":{"start":{"line":25,"column":26},"end":{"line":25,"column":74}},"17":{"start":{"line":26,"column":0},"end":{"line":26,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":32},"end":{"line":23,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":50},"end":{"line":17,"column":9}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":32},"end":{"line":18,"column":33}},"loc":{"start":{"line":18,"column":52},"end":{"line":22,"column":9}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":36},"end":{"line":14,"column":52}},"type":"binary-expr","locations":[{"start":{"line":14,"column":36},"end":{"line":14,"column":46}},{"start":{"line":14,"column":50},"end":{"line":14,"column":52}}],"line":14},"4":{"loc":{"start":{"line":14,"column":60},"end":{"line":14,"column":87}},"type":"binary-expr","locations":[{"start":{"line":14,"column":60},"end":{"line":14,"column":82}},{"start":{"line":14,"column":86},"end":{"line":14,"column":87}}],"line":14},"5":{"loc":{"start":{"line":14,"column":96},"end":{"line":14,"column":123}},"type":"binary-expr","locations":[{"start":{"line":14,"column":96},"end":{"line":14,"column":117}},{"start":{"line":14,"column":121},"end":{"line":14,"column":123}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":1,"17":1},"f":{"0":1,"1":1,"2":0,"3":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/controllers/pokemon.controller.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/controllers/pokemon.controller.ts"],"names":[],"mappings":";;;;;AAAA,yDAAgD;AAChD,kFAA8E;AAE9E,gDAAgD;AAIhD,MAAM,iBAAiB;IACrB,YAA6B,cAA+B;QAA/B,mBAAc,GAAd,cAAc,CAAiB;QAErD,mBAAc,GAAc,KAAK,EAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YACnD,MAAM,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC;YAEtB,MAAM,OAAO,GAAuB,EAAE,IAAI,EAAE,KAAK,CAAC,IAAc,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC,MAAgB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,KAAe,CAAC,IAAI,EAAE,EAAE,CAAC;YACpK,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAEtE,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,IAAI,EAAE,8BAA8B,EAAE,+BAAW,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;QAC7F,CAAC,CAAA;QAEM,qBAAgB,GAAc,KAAK,EAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YACrD,MAAM,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAEnC,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;YAExE,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,IAAI,EAAE,8BAA8B,EAAE,+BAAW,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;QACzF,CAAC,CAAA;IAjB8D,CAAC;CAkBjE;AAED,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,CAAC,yBAAc,CAAC,CAAC;AAChE,kBAAe,iBAAiB,CAAC","sourcesContent":["import { StatusCodes } from \"http-status-codes\";\nimport pokemonService, { IPokemonService } from \"../services/pokemon.service\";\nimport { fnRequest } from \"../types\";\nimport { ApiResponse } from \"../utils/response\";\nimport * as Dtos from \"../dtos/pokemon.dto\";\n\n\nclass PokemonController {\n  constructor(private readonly pokemonService: IPokemonService) {}\n\n  public getPokemonList: fnRequest = async(req, res) => {\n    const { query } = req;\n\n    const payload: Dtos.FilterPokemon = { name: query.name as string || '', page: parseInt(query.offset as string) || 1, limit: parseInt(query.limit as string) || 20 };\n    const pokemonList = await this.pokemonService.getPokemonList(payload);\n    \n    return ApiResponse(res, null, \"Pokemon fetched successfully\", StatusCodes.OK, pokemonList);\n  }\n\n  public getPokemonByName: fnRequest = async(req, res) => {\n    const { pokemonName } = req.params;\n\n    const pokemon = await this.pokemonService.getPokemonByName(pokemonName);\n    \n    return ApiResponse(res, null, \"Pokemon fetched successfully\", StatusCodes.OK, pokemon);\n  }\n}\n\nconst pokemonController = new PokemonController(pokemonService);\nexport default pokemonController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1c20ad020079ce962e2a8ba35c0b9d675cda8363","contentHash":"510866c77a7b889da04828e03d9ac20a09fd149193e5c671c0f4e2e5f349ca20"},"/Users/user/Documents/GitHub/firefly/backend/src/services/pokemon.service.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/services/pokemon.service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":49}},"2":{"start":{"line":4,"column":24},"end":{"line":4,"column":57}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":43}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":67}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":29}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":41}},"7":{"start":{"line":13,"column":25},"end":{"line":13,"column":118}},"8":{"start":{"line":14,"column":23},"end":{"line":14,"column":65}},"9":{"start":{"line":15,"column":8},"end":{"line":18,"column":9}},"10":{"start":{"line":16,"column":12},"end":{"line":16,"column":86}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":56}},"12":{"start":{"line":19,"column":31},"end":{"line":19,"column":65}},"13":{"start":{"line":20,"column":8},"end":{"line":23,"column":9}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":99}},"15":{"start":{"line":22,"column":12},"end":{"line":22,"column":34}},"16":{"start":{"line":24,"column":31},"end":{"line":24,"column":68}},"17":{"start":{"line":25,"column":8},"end":{"line":25,"column":59}},"18":{"start":{"line":26,"column":8},"end":{"line":32,"column":9}},"19":{"start":{"line":27,"column":27},"end":{"line":27,"column":47}},"20":{"start":{"line":28,"column":12},"end":{"line":28,"column":26}},"21":{"start":{"line":31,"column":12},"end":{"line":31,"column":50}},"22":{"start":{"line":35,"column":25},"end":{"line":35,"column":93}},"23":{"start":{"line":36,"column":23},"end":{"line":36,"column":65}},"24":{"start":{"line":37,"column":8},"end":{"line":40,"column":9}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":112}},"26":{"start":{"line":39,"column":12},"end":{"line":39,"column":26}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":113}},"28":{"start":{"line":42,"column":51},"end":{"line":45,"column":10}},"29":{"start":{"line":46,"column":24},"end":{"line":46,"column":44}},"30":{"start":{"line":47,"column":24},"end":{"line":47,"column":44}},"31":{"start":{"line":48,"column":29},"end":{"line":48,"column":33}},"32":{"start":{"line":49,"column":8},"end":{"line":57,"column":9}},"33":{"start":{"line":50,"column":12},"end":{"line":56,"column":13}},"34":{"start":{"line":51,"column":42},"end":{"line":51,"column":143}},"35":{"start":{"line":52,"column":16},"end":{"line":52,"column":88}},"36":{"start":{"line":55,"column":16},"end":{"line":55,"column":99}},"37":{"start":{"line":58,"column":24},"end":{"line":77,"column":9}},"38":{"start":{"line":62,"column":43},"end":{"line":65,"column":13}},"39":{"start":{"line":66,"column":51},"end":{"line":69,"column":13}},"40":{"start":{"line":70,"column":43},"end":{"line":73,"column":13}},"41":{"start":{"line":78,"column":8},"end":{"line":78,"column":95}},"42":{"start":{"line":79,"column":8},"end":{"line":79,"column":114}},"43":{"start":{"line":80,"column":8},"end":{"line":80,"column":23}},"44":{"start":{"line":83,"column":8},"end":{"line":83,"column":98}},"45":{"start":{"line":84,"column":8},"end":{"line":133,"column":9}},"46":{"start":{"line":85,"column":29},"end":{"line":85,"column":112}},"47":{"start":{"line":86,"column":32},"end":{"line":86,"column":44}},"48":{"start":{"line":87,"column":36},"end":{"line":87,"column":38}},"49":{"start":{"line":88,"column":12},"end":{"line":125,"column":13}},"50":{"start":{"line":88,"column":25},"end":{"line":88,"column":26}},"51":{"start":{"line":89,"column":30},"end":{"line":89,"column":71}},"52":{"start":{"line":90,"column":38},"end":{"line":119,"column":18}},"53":{"start":{"line":91,"column":20},"end":{"line":118,"column":21}},"54":{"start":{"line":92,"column":48},"end":{"line":92,"column":110}},"55":{"start":{"line":93,"column":45},"end":{"line":93,"column":94}},"56":{"start":{"line":94,"column":24},"end":{"line":96,"column":25}},"57":{"start":{"line":95,"column":28},"end":{"line":95,"column":48}},"58":{"start":{"line":97,"column":48},"end":{"line":97,"column":107}},"59":{"start":{"line":98,"column":40},"end":{"line":98,"column":60}},"60":{"start":{"line":99,"column":50},"end":{"line":111,"column":25}},"61":{"start":{"line":103,"column":59},"end":{"line":106,"column":29}},"62":{"start":{"line":107,"column":67},"end":{"line":110,"column":29}},"63":{"start":{"line":112,"column":24},"end":{"line":112,"column":128}},"64":{"start":{"line":113,"column":24},"end":{"line":113,"column":49}},"65":{"start":{"line":116,"column":24},"end":{"line":116,"column":88}},"66":{"start":{"line":117,"column":24},"end":{"line":117,"column":36}},"67":{"start":{"line":120,"column":37},"end":{"line":120,"column":69}},"68":{"start":{"line":121,"column":16},"end":{"line":121,"column":70}},"69":{"start":{"line":122,"column":16},"end":{"line":124,"column":17}},"70":{"start":{"line":123,"column":20},"end":{"line":123,"column":75}},"71":{"start":{"line":123,"column":49},"end":{"line":123,"column":73}},"72":{"start":{"line":126,"column":12},"end":{"line":126,"column":108}},"73":{"start":{"line":127,"column":12},"end":{"line":127,"column":124}},"74":{"start":{"line":128,"column":12},"end":{"line":128,"column":65}},"75":{"start":{"line":131,"column":12},"end":{"line":131,"column":64}},"76":{"start":{"line":132,"column":12},"end":{"line":132,"column":24}},"77":{"start":{"line":136,"column":8},"end":{"line":159,"column":9}},"78":{"start":{"line":137,"column":12},"end":{"line":137,"column":95}},"79":{"start":{"line":138,"column":29},"end":{"line":138,"column":94}},"80":{"start":{"line":139,"column":28},"end":{"line":151,"column":13}},"81":{"start":{"line":143,"column":46},"end":{"line":146,"column":17}},"82":{"start":{"line":147,"column":54},"end":{"line":150,"column":17}},"83":{"start":{"line":152,"column":29},"end":{"line":152,"column":97}},"84":{"start":{"line":153,"column":12},"end":{"line":153,"column":99}},"85":{"start":{"line":154,"column":12},"end":{"line":154,"column":27}},"86":{"start":{"line":157,"column":12},"end":{"line":157,"column":73}},"87":{"start":{"line":158,"column":12},"end":{"line":158,"column":24}},"88":{"start":{"line":162,"column":25},"end":{"line":162,"column":93}},"89":{"start":{"line":163,"column":23},"end":{"line":163,"column":65}},"90":{"start":{"line":164,"column":8},"end":{"line":167,"column":9}},"91":{"start":{"line":165,"column":12},"end":{"line":165,"column":89}},"92":{"start":{"line":166,"column":12},"end":{"line":166,"column":26}},"93":{"start":{"line":168,"column":27},"end":{"line":168,"column":57}},"94":{"start":{"line":169,"column":31},"end":{"line":169,"column":67}},"95":{"start":{"line":170,"column":8},"end":{"line":173,"column":9}},"96":{"start":{"line":171,"column":12},"end":{"line":171,"column":93}},"97":{"start":{"line":172,"column":12},"end":{"line":172,"column":34}},"98":{"start":{"line":174,"column":31},"end":{"line":174,"column":61}},"99":{"start":{"line":175,"column":8},"end":{"line":175,"column":61}},"100":{"start":{"line":176,"column":8},"end":{"line":182,"column":9}},"101":{"start":{"line":177,"column":27},"end":{"line":177,"column":47}},"102":{"start":{"line":178,"column":12},"end":{"line":178,"column":26}},"103":{"start":{"line":181,"column":12},"end":{"line":181,"column":52}},"104":{"start":{"line":185,"column":27},"end":{"line":185,"column":29}},"105":{"start":{"line":186,"column":25},"end":{"line":194,"column":9}},"106":{"start":{"line":187,"column":12},"end":{"line":190,"column":15}},"107":{"start":{"line":191,"column":12},"end":{"line":193,"column":13}},"108":{"start":{"line":192,"column":16},"end":{"line":192,"column":76}},"109":{"start":{"line":192,"column":55},"end":{"line":192,"column":74}},"110":{"start":{"line":195,"column":8},"end":{"line":195,"column":24}},"111":{"start":{"line":196,"column":8},"end":{"line":196,"column":26}},"112":{"start":{"line":199,"column":22},"end":{"line":199,"column":52}},"113":{"start":{"line":200,"column":8},"end":{"line":200,"column":49}},"114":{"start":{"line":203,"column":8},"end":{"line":204,"column":28}},"115":{"start":{"line":204,"column":12},"end":{"line":204,"column":28}},"116":{"start":{"line":205,"column":8},"end":{"line":205,"column":87}},"117":{"start":{"line":205,"column":36},"end":{"line":205,"column":85}},"118":{"start":{"line":208,"column":8},"end":{"line":208,"column":37}},"119":{"start":{"line":211,"column":23},"end":{"line":211,"column":43}},"120":{"start":{"line":212,"column":0},"end":{"line":212,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":11,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":31},"end":{"line":33,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":33},"end":{"line":81,"column":5}},"line":34},"3":{"name":"(anonymous_3)","decl":{"start":{"line":62,"column":37},"end":{"line":62,"column":38}},"loc":{"start":{"line":62,"column":43},"end":{"line":65,"column":13}},"line":62},"4":{"name":"(anonymous_4)","decl":{"start":{"line":66,"column":45},"end":{"line":66,"column":46}},"loc":{"start":{"line":66,"column":51},"end":{"line":69,"column":13}},"line":66},"5":{"name":"(anonymous_5)","decl":{"start":{"line":70,"column":37},"end":{"line":70,"column":38}},"loc":{"start":{"line":70,"column":43},"end":{"line":73,"column":13}},"line":70},"6":{"name":"(anonymous_6)","decl":{"start":{"line":82,"column":4},"end":{"line":82,"column":5}},"loc":{"start":{"line":82,"column":43},"end":{"line":134,"column":5}},"line":82},"7":{"name":"(anonymous_7)","decl":{"start":{"line":90,"column":48},"end":{"line":90,"column":49}},"loc":{"start":{"line":90,"column":67},"end":{"line":119,"column":17}},"line":90},"8":{"name":"(anonymous_8)","decl":{"start":{"line":103,"column":53},"end":{"line":103,"column":54}},"loc":{"start":{"line":103,"column":59},"end":{"line":106,"column":29}},"line":103},"9":{"name":"(anonymous_9)","decl":{"start":{"line":107,"column":61},"end":{"line":107,"column":62}},"loc":{"start":{"line":107,"column":67},"end":{"line":110,"column":29}},"line":107},"10":{"name":"(anonymous_10)","decl":{"start":{"line":123,"column":38},"end":{"line":123,"column":39}},"loc":{"start":{"line":123,"column":49},"end":{"line":123,"column":73}},"line":123},"11":{"name":"(anonymous_11)","decl":{"start":{"line":135,"column":4},"end":{"line":135,"column":5}},"loc":{"start":{"line":135,"column":36},"end":{"line":160,"column":5}},"line":135},"12":{"name":"(anonymous_12)","decl":{"start":{"line":143,"column":38},"end":{"line":143,"column":39}},"loc":{"start":{"line":143,"column":46},"end":{"line":146,"column":17}},"line":143},"13":{"name":"(anonymous_13)","decl":{"start":{"line":147,"column":46},"end":{"line":147,"column":47}},"loc":{"start":{"line":147,"column":54},"end":{"line":150,"column":17}},"line":147},"14":{"name":"(anonymous_14)","decl":{"start":{"line":161,"column":4},"end":{"line":161,"column":5}},"loc":{"start":{"line":161,"column":30},"end":{"line":183,"column":5}},"line":161},"15":{"name":"(anonymous_15)","decl":{"start":{"line":184,"column":4},"end":{"line":184,"column":5}},"loc":{"start":{"line":184,"column":31},"end":{"line":197,"column":5}},"line":184},"16":{"name":"(anonymous_16)","decl":{"start":{"line":186,"column":25},"end":{"line":186,"column":26}},"loc":{"start":{"line":186,"column":35},"end":{"line":194,"column":9}},"line":186},"17":{"name":"(anonymous_17)","decl":{"start":{"line":192,"column":40},"end":{"line":192,"column":41}},"loc":{"start":{"line":192,"column":55},"end":{"line":192,"column":74}},"line":192},"18":{"name":"(anonymous_18)","decl":{"start":{"line":198,"column":4},"end":{"line":198,"column":5}},"loc":{"start":{"line":198,"column":26},"end":{"line":201,"column":5}},"line":198},"19":{"name":"(anonymous_19)","decl":{"start":{"line":202,"column":4},"end":{"line":202,"column":5}},"loc":{"start":{"line":202,"column":33},"end":{"line":206,"column":5}},"line":202},"20":{"name":"(anonymous_20)","decl":{"start":{"line":205,"column":31},"end":{"line":205,"column":32}},"loc":{"start":{"line":205,"column":36},"end":{"line":205,"column":85}},"line":205},"21":{"name":"(anonymous_21)","decl":{"start":{"line":207,"column":4},"end":{"line":207,"column":5}},"loc":{"start":{"line":207,"column":27},"end":{"line":209,"column":5}},"line":207}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":98},"end":{"line":13,"column":116}},"type":"binary-expr","locations":[{"start":{"line":13,"column":98},"end":{"line":13,"column":107}},{"start":{"line":13,"column":111},"end":{"line":13,"column":116}}],"line":13},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":18,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":18,"column":9}},{"start":{},"end":{}}],"line":15},"2":{"loc":{"start":{"line":20,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":23,"column":9}},{"start":{},"end":{}}],"line":20},"3":{"loc":{"start":{"line":37,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":40,"column":9}},{"start":{},"end":{}}],"line":37},"4":{"loc":{"start":{"line":49,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":57,"column":9}},{"start":{},"end":{}}],"line":49},"5":{"loc":{"start":{"line":49,"column":12},"end":{"line":49,"column":66}},"type":"binary-expr","locations":[{"start":{"line":49,"column":12},"end":{"line":49,"column":35}},{"start":{"line":49,"column":39},"end":{"line":49,"column":66}}],"line":49},"6":{"loc":{"start":{"line":61,"column":22},"end":{"line":61,"column":115}},"type":"binary-expr","locations":[{"start":{"line":61,"column":22},"end":{"line":61,"column":51}},{"start":{"line":61,"column":55},"end":{"line":61,"column":115}}],"line":61},"7":{"loc":{"start":{"line":94,"column":24},"end":{"line":96,"column":25}},"type":"if","locations":[{"start":{"line":94,"column":24},"end":{"line":96,"column":25}},{"start":{},"end":{}}],"line":94},"8":{"loc":{"start":{"line":102,"column":38},"end":{"line":102,"column":129}},"type":"binary-expr","locations":[{"start":{"line":102,"column":38},"end":{"line":102,"column":96}},{"start":{"line":102,"column":100},"end":{"line":102,"column":129}}],"line":102},"9":{"loc":{"start":{"line":122,"column":16},"end":{"line":124,"column":17}},"type":"if","locations":[{"start":{"line":122,"column":16},"end":{"line":124,"column":17}},{"start":{},"end":{}}],"line":122},"10":{"loc":{"start":{"line":142,"column":26},"end":{"line":142,"column":111}},"type":"binary-expr","locations":[{"start":{"line":142,"column":26},"end":{"line":142,"column":81}},{"start":{"line":142,"column":85},"end":{"line":142,"column":111}}],"line":142},"11":{"loc":{"start":{"line":164,"column":8},"end":{"line":167,"column":9}},"type":"if","locations":[{"start":{"line":164,"column":8},"end":{"line":167,"column":9}},{"start":{},"end":{}}],"line":164},"12":{"loc":{"start":{"line":170,"column":8},"end":{"line":173,"column":9}},"type":"if","locations":[{"start":{"line":170,"column":8},"end":{"line":173,"column":9}},{"start":{},"end":{}}],"line":170},"13":{"loc":{"start":{"line":191,"column":12},"end":{"line":193,"column":13}},"type":"if","locations":[{"start":{"line":191,"column":12},"end":{"line":193,"column":13}},{"start":{},"end":{}}],"line":191},"14":{"loc":{"start":{"line":191,"column":16},"end":{"line":191,"column":61}},"type":"binary-expr","locations":[{"start":{"line":191,"column":16},"end":{"line":191,"column":31}},{"start":{"line":191,"column":35},"end":{"line":191,"column":61}}],"line":191},"15":{"loc":{"start":{"line":203,"column":8},"end":{"line":204,"column":28}},"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":204,"column":28}},{"start":{},"end":{}}],"line":203}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":1,"120":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/services/pokemon.service.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/services/pokemon.service.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Dtos from \"../dtos/pokemon.dto\";\nimport * as speciesDtos from \"../dtos/pokemon-species.dto\";\nimport { apiClient } from \"../utils/apiClient\";\nimport { cacheManager, CACHE_CONFIG, CACHE_KEYS } from '../utils/cache-manager';\nimport { LoggerImpl } from \"../utils/logger\";\n\nexport interface IPokemonService {\n  getPokemonList(args: Dtos.FilterPokemon): Promise<Dtos.SimplifiedPokemonDTO[]>;\n  getPokemonByName(name: string): Promise<any>;\n}\n\nclass PokemonService implements IPokemonService {\n  constructor() {}\n  logger = new LoggerImpl(PokemonService.name);\n  private BATCH_SIZE = 20;\n\n  private pendingRequests = new Map<string, Promise<any>>();\n\n  public async getPokemonList(args: Dtos.FilterPokemon): Promise<Dtos.SimplifiedPokemonDTO[]> {\n    const cacheKey = `${CACHE_KEYS.POKEMON_LIST}:${args.page}_${args.limit}_${args.name || 'all'}`;\n\n    // Check cache first\n    const cached = cacheManager.get<Dtos.SimplifiedPokemonDTO[]>(cacheKey);\n    if (cached) {\n      logger.info('Returning cached Pokemon list', {trace: 'getPokemonList'});\n      return this.filterByName(cached, args.name);\n    }\n\n    const pendingRequest = this.pendingRequests.get(cacheKey);\n    if (pendingRequest) {\n      logger.info('Returning pending request for Pokemon list', {trace: 'getPokemonList'});\n      return pendingRequest;\n    }\n\n    const requestPromise = this.fetchPokemonList(args, cacheKey);\n    this.pendingRequests.set(cacheKey, requestPromise);\n\n    try {\n      const result = await requestPromise;\n      return result;\n    } finally {\n      this.pendingRequests.delete(cacheKey);\n    }\n  }\n\n  public async getPokemonByName(name: string) {\n    const cacheKey = `${CACHE_KEYS.POKEMON_DETAIL}:${name.toLowerCase()}`;\n    \n    // Check cache first\n    const cached = cacheManager.get(cacheKey);\n    if (cached) {\n      logger.info(`Returning cached Pokemon ${name}`, {trace: 'src.services.pokemon.getPokemonByName'});\n      return cached;\n    }\n\n    logger.info(`Fetching Pokemon ${name} from PokéAPI`, {trace: 'src.services.pokemon.getPokemonByName'});\n    \n    const [detailsResponse, speciesResponse] = await Promise.all([\n      apiClient.get(`/pokemon/${name}`),\n      apiClient.get(`/pokemon-species/${name}`)\n    ]);\n\n    const details: Dtos.PokemonDTO = detailsResponse.data;\n    const species: speciesDtos.PokemonSpecies = speciesResponse.data;\n\n    // Get evolution chain\n    let evolutionChain = null;\n    if (species.evolution_chain && species.evolution_chain.url) {\n      try {\n        const evolutionResponse = await apiClient.get(species.evolution_chain.url.replace('https://pokeapi.co/api/v2', ''));\n        evolutionChain = this.parseEvolutionChain(evolutionResponse.data.chain);\n      } catch (error) {\n        logger.error(`Failed to fetch evolution chain for Pokemon ${name}`, error.message);\n      }\n    }\n\n    const pokemon = {\n      id: details.id,\n      name: details.name,\n      imageUrl: details.sprites.front_default || details?.sprites?.other?.['official-artwork']?.front_default,\n      types: details.types.map(t => ({\n        name: t.type.name,\n        slot: t.slot\n      })),\n      abilities: details.abilities.map(a => ({\n        name: a.ability.name,\n        isHidden: a.is_hidden\n      })),\n      stats: details.stats.map(s => ({\n        name: s.stat.name,\n        value: s.base_stat\n      })),\n      height: details.height,\n      weight: details.weight,\n      evolutionChain: evolutionChain\n    };\n\n    // Cache the result\n    cacheManager.set(cacheKey, pokemon, CACHE_CONFIG.LONG);\n    logger.info(`Successfully fetched and cached Pokemon ${name}`, {trace: 'src.services.pokemon.service'});\n    \n    return pokemon;\n  }\n\n  private async fetchPokemonList(\n    args: Dtos.FilterPokemon, \n    cacheKey: string\n  ): Promise<Dtos.SimplifiedPokemonDTO[]> {\n    logger.info(`Fetching ${args.limit} Pokemon from PokéAPI`, {trace: 'fetchPokemonList'});\n    \n    try {\n      const { data } = await apiClient.get(`/pokemon?limit=${args.limit}&offset=${args.page}`);\n      const pokemonList = data.results;\n      const enrichedPokemon: Dtos.SimplifiedPokemonDTO[] = [];\n\n      for (let i = 0; i < pokemonList.length; i += this.BATCH_SIZE) {\n        const batch = pokemonList.slice(i, i + this.BATCH_SIZE);\n        \n        const batchPromises = batch.map(async (pokemon: Dtos.Pokemon) => {\n          try {\n            const pokemonCacheKey = `${CACHE_KEYS.POKEMON_DETAIL}:${pokemon.name}`;\n            const cachedDetail = cacheManager.get<Dtos.SimplifiedPokemonDTO>(pokemonCacheKey);\n            \n            if (cachedDetail) {\n              return cachedDetail;\n            }\n\n            const detailsResponse = await apiClient.get(`/pokemon/${pokemon.name}`);\n            const details: Dtos.PokemonDTO = detailsResponse.data;\n      \n            const simplifiedPokemon = {\n              id: details.id,\n              name: details.name,\n              imageUrl: details.sprites.other?.['official-artwork']?.front_default || details.sprites.front_default,\n              types: details.types.map(t => ({\n                name: t.type.name,\n                slot: t.slot\n              })),\n              abilities: details.abilities.map(a => ({\n                name: a.ability.name,\n                isHidden: a.is_hidden\n              })),\n            };\n\n            cacheManager.set(pokemonCacheKey, simplifiedPokemon, CACHE_CONFIG.LONG);\n\n            return simplifiedPokemon;\n          } catch (error) {\n            logger.error(`Failed to fetch Pokemon ${pokemon.name}:`, error);\n            return null;\n          }\n        });\n\n        const batchResults = await Promise.all(batchPromises);\n        enrichedPokemon.push(...batchResults.filter(Boolean) as Dtos.SimplifiedPokemonDTO[]);\n        \n        // Rate limiting between batches\n        if (i + this.BATCH_SIZE < pokemonList.length) {\n          await new Promise(resolve => setTimeout(resolve, 100));\n        }\n      }\n      \n      // Cache the complete list\n      cacheManager.set(cacheKey, enrichedPokemon, CACHE_CONFIG.SHORT);\n      logger.info(`Successfully fetched and cached ${enrichedPokemon.length} Pokemon`, {trace: 'fetchPokemonList'});\n      \n      return this.filterByName(enrichedPokemon, args.name);\n    } catch (error) {\n      logger.error('Error fetching Pokemon list:', error);\n      throw error;\n    }\n  }\n\n  private async fetchPokemonDetails(name: string): Promise<Dtos.SimplifiedPokemonDTO | null> {\n    try {\n      logger.info(`Fetching Pokemon details: ${name}`, {trace: 'fetchPokemonDetails'});\n      \n      const { data } = await apiClient.get(`/pokemon/${name.toLowerCase()}`);\n      \n      const pokemon: Dtos.SimplifiedPokemonDTO = {\n        id: data.id,\n        name: data.name,\n        imageUrl: data.sprites.other?.['official-artwork']?.front_default || data.sprites.front_default,\n        types: data.types.map((t: any) => ({\n          name: t.type.name,\n          slot: t.slot\n        })),\n        abilities: data.abilities.map((a: any) => ({\n          name: a.ability.name,\n          isHidden: a.is_hidden\n        })),\n      };\n\n      // Cache the result\n      const cacheKey = `${CACHE_KEYS.POKEMON_DETAIL}:${name.toLowerCase()}`;\n      cacheManager.set(cacheKey, pokemon, CACHE_CONFIG.LONG);\n\n      return pokemon;\n    } catch (error) {\n      this.logger.error(`Failed to fetch Pokemon ${name}:`, error);\n      return null;\n    }\n  }\n\n  public async searchPokemon(name: string): Promise<Dtos.SimplifiedPokemonDTO | null> {\n    const cacheKey = `${CACHE_KEYS.POKEMON_DETAIL}:${name.toLowerCase()}`;\n\n    // Check cache\n    const cached = cacheManager.get<Dtos.SimplifiedPokemonDTO>(cacheKey);\n    if (cached) {\n      logger.info(`Returning cached Pokemon: ${name}`, {trace: 'searchPokemon'});\n      return cached;\n    }\n\n    // Check pending requests\n    const pendingKey = `search:${name.toLowerCase()}`;\n    const pendingRequest = this.pendingRequests.get(pendingKey);\n    if (pendingRequest) {\n      logger.info(`Returning pending search for: ${name}`, {trace: 'searchPokemon'});\n      return pendingRequest;\n    }\n\n    // Create new request\n    const requestPromise = this.fetchPokemonDetails(name);\n    this.pendingRequests.set(pendingKey, requestPromise);\n\n    try {\n      const result = await requestPromise;\n      return result;\n    } finally {\n      this.pendingRequests.delete(pendingKey);\n    }\n  }\n\n  parseEvolutionChain(chain: any) {\n    const evolutions: {name: string, id: number}[] = [];\n    \n    const traverse = (node: any) => {\n      evolutions.push({\n        name: node.species.name,\n        id: this.extractIdFromUrl(node.species.url)\n      });\n      \n      if (node.evolves_to && node.evolves_to.length > 0) {\n        node.evolves_to.forEach((evolution: any) => traverse(evolution));\n      }\n    };\n    \n    traverse(chain);\n    return evolutions;\n  }\n\n  extractIdFromUrl(url: string): number {\n    const parts = url.split('/').filter(Boolean);\n    return parseInt(parts[parts.length - 1]);\n  }\n\n  private filterByName(pokemons: Dtos.SimplifiedPokemonDTO[], name?: string): Dtos.SimplifiedPokemonDTO[] {\n    if (!name) return pokemons;\n    return pokemons.filter(p => p.name.toLowerCase().includes(name.toLowerCase()));\n  }\n\n  /**\n   * Clear all pending requests (useful for testing/cleanup)\n   */\n  public clearPendingRequests(): void {\n    this.pendingRequests.clear();\n  }\n}\n\nconst pokemonService = new PokemonService();\nexport default pokemonService;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"00658de48c379eabd083500b720d21ddbcbbbecc","contentHash":"8a251abbb9a7c4fff604da0f4feac9684c301783bd83947e478ce0dd51109d69"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/apiClient.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/apiClient.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":27}},"4":{"start":{"line":7,"column":16},"end":{"line":7,"column":49}},"5":{"start":{"line":8,"column":20},"end":{"line":8,"column":50}},"6":{"start":{"line":9,"column":18},"end":{"line":15,"column":2}},"7":{"start":{"line":16,"column":0},"end":{"line":16,"column":30}},"8":{"start":{"line":17,"column":0},"end":{"line":22,"column":3}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":79}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":33}},"12":{"start":{"line":23,"column":0},"end":{"line":36,"column":3}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":20}},"14":{"start":{"line":26,"column":4},"end":{"line":34,"column":5}},"15":{"start":{"line":27,"column":8},"end":{"line":27,"column":91}},"16":{"start":{"line":29,"column":9},"end":{"line":34,"column":5}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":70}},"18":{"start":{"line":33,"column":8},"end":{"line":33,"column":51}},"19":{"start":{"line":35,"column":4},"end":{"line":35,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":35},"end":{"line":17,"column":36}},"loc":{"start":{"line":17,"column":47},"end":{"line":20,"column":1}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":3},"end":{"line":20,"column":4}},"loc":{"start":{"line":20,"column":14},"end":{"line":22,"column":1}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":36},"end":{"line":23,"column":37}},"loc":{"start":{"line":23,"column":50},"end":{"line":25,"column":1}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":25,"column":3},"end":{"line":25,"column":4}},"loc":{"start":{"line":25,"column":14},"end":{"line":36,"column":1}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":26,"column":4},"end":{"line":34,"column":5}},"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":34,"column":5}},{"start":{"line":29,"column":9},"end":{"line":34,"column":5}}],"line":26},"4":{"loc":{"start":{"line":29,"column":9},"end":{"line":34,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":9},"end":{"line":34,"column":5}},{"start":{"line":32,"column":9},"end":{"line":34,"column":5}}],"line":29}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/apiClient.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/apiClient.ts"],"names":[],"mappings":";;;;;;AAAA,kDAA0B;AAC1B,mDAAuD;AAEvD,MAAM,SAAS,GAAG,eAAK,CAAC,MAAM,CAAC;IAC7B,OAAO,EAAE,4BAAgB;IACzB,OAAO,EAAE,KAAK;IACd,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;KACnC;CACF,CAAC,CAAC;AA8BM,8BAAS;AA3BlB,SAAS,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC,MAAM,EAAE,EAAE;IACT,MAAM,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAAC,MAAM,EAAE,WAAW,EAAE,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;IAC3E,OAAO,MAAM,CAAC;AAChB,CAAC,EACD,CAAC,KAAK,EAAE,EAAE;IACR,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC/B,CAAC,CACF,CAAC;AAGF,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,QAAQ,EAAE,EAAE;IACX,OAAO,QAAQ,CAAC;AAClB,CAAC,EACD,CAAC,KAAK,EAAE,EAAE;IACR,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC;QACnB,MAAM,CAAC,KAAK,CAAC,eAAe,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC;IACrF,CAAC;SAAM,IAAI,KAAK,CAAC,OAAO,EAAE,CAAC;QACzB,MAAM,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;IAChE,CAAC;SAAM,CAAC;QACN,MAAM,CAAC,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAC7C,CAAC;IACD,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC/B,CAAC,CACF,CAAC","sourcesContent":["import axios from 'axios';\nimport { POKEAPI_BASE_URL } from '../config/constants';\n\nconst apiClient = axios.create({\n  baseURL: POKEAPI_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor for logging\napiClient.interceptors.request.use(\n  (config) => {\n    logger.info(`[API Request] ${config.method?.toUpperCase()} ${config.url}`);\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    if (error.response) {\n      logger.error(`[API Error] ${error.response.status}: ${error.response.statusText}`);\n    } else if (error.request) {\n      logger.error('[API Error] No response received from PokéAPI');\n    } else {\n      logger.error('[API Error]', error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport { apiClient}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"47278fe8bafd65aae7e908453c7f6b2fc30033f4","contentHash":"9021ca6df763a082a4f993f9fd7092e10d3fcd4f2c2b6fb397d432356c5b8b30"},"/Users/user/Documents/GitHub/firefly/backend/src/config/constants.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/constants.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":108}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":49}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":50}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":25}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":38}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":25}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":30}},"8":{"start":{"line":10,"column":25},"end":{"line":10,"column":53}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":44}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/constants.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/constants.ts"],"names":[],"mappings":";;;AAAA,MAAM,mBAAmB,GAAG,qBAAqB,CAAC;AAS9C,kDAAmB;AAPvB,MAAM,aAAa,GAAG,GAAG,CAAC;AAQtB,sCAAa;AANjB,MAAM,SAAS,GAAG,EAAE,GAAG,EAAE,CAAC;AAOtB,8BAAS;AALb,MAAM,gBAAgB,GAAG,4BAA4B,CAAC;AAMlD,4CAAgB","sourcesContent":["const FAVORITES_FILE_PATH = 'data/favorites.json';\n\nconst POKEMON_LIMIT = 151;\n\nconst CACHE_TTL = 30 * 60;\n\nconst POKEAPI_BASE_URL = 'https://pokeapi.co/api/v2/';\n\nexport {\n    FAVORITES_FILE_PATH,\n    POKEMON_LIMIT,\n    CACHE_TTL,\n    POKEAPI_BASE_URL\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"35bcdcd9c24ffc293b3003f5cf065b96e6d986cd","contentHash":"02eea50c17cf69f96c72b926fafbcf84e4e86b1502d2b616f4cb51c684ed4fbb"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/cache-manager.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/cache-manager.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":120}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":59}},"5":{"start":{"line":8,"column":0},"end":{"line":13,"column":2}},"6":{"start":{"line":14,"column":0},"end":{"line":20,"column":2}},"7":{"start":{"line":23,"column":8},"end":{"line":23,"column":26}},"8":{"start":{"line":24,"column":8},"end":{"line":24,"column":27}},"9":{"start":{"line":25,"column":8},"end":{"line":31,"column":11}},"10":{"start":{"line":32,"column":8},"end":{"line":34,"column":11}},"11":{"start":{"line":33,"column":12},"end":{"line":33,"column":84}},"12":{"start":{"line":35,"column":8},"end":{"line":37,"column":11}},"13":{"start":{"line":36,"column":12},"end":{"line":36,"column":85}},"14":{"start":{"line":38,"column":8},"end":{"line":38,"column":80}},"15":{"start":{"line":41,"column":22},"end":{"line":41,"column":41}},"16":{"start":{"line":42,"column":8},"end":{"line":49,"column":9}},"17":{"start":{"line":43,"column":12},"end":{"line":43,"column":28}},"18":{"start":{"line":44,"column":12},"end":{"line":44,"column":77}},"19":{"start":{"line":47,"column":12},"end":{"line":47,"column":29}},"20":{"start":{"line":48,"column":12},"end":{"line":48,"column":78}},"21":{"start":{"line":50,"column":8},"end":{"line":50,"column":21}},"22":{"start":{"line":53,"column":24},"end":{"line":53,"column":60}},"23":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"24":{"start":{"line":55,"column":12},"end":{"line":55,"column":108}},"25":{"start":{"line":57,"column":8},"end":{"line":57,"column":23}},"26":{"start":{"line":60,"column":24},"end":{"line":60,"column":43}},"27":{"start":{"line":61,"column":8},"end":{"line":61,"column":77}},"28":{"start":{"line":62,"column":8},"end":{"line":62,"column":23}},"29":{"start":{"line":65,"column":21},"end":{"line":65,"column":38}},"30":{"start":{"line":66,"column":22},"end":{"line":66,"column":60}},"31":{"start":{"line":67,"column":29},"end":{"line":67,"column":64}},"32":{"start":{"line":67,"column":48},"end":{"line":67,"column":63}},"33":{"start":{"line":68,"column":8},"end":{"line":72,"column":9}},"34":{"start":{"line":69,"column":28},"end":{"line":69,"column":56}},"35":{"start":{"line":70,"column":12},"end":{"line":70,"column":117}},"36":{"start":{"line":71,"column":12},"end":{"line":71,"column":27}},"37":{"start":{"line":73,"column":8},"end":{"line":73,"column":17}},"38":{"start":{"line":76,"column":8},"end":{"line":76,"column":76}},"39":{"start":{"line":79,"column":8},"end":{"line":79,"column":75}},"40":{"start":{"line":82,"column":8},"end":{"line":82,"column":81}},"41":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"42":{"start":{"line":86,"column":12},"end":{"line":86,"column":76}},"43":{"start":{"line":88,"column":8},"end":{"line":88,"column":71}},"44":{"start":{"line":91,"column":8},"end":{"line":91,"column":30}},"45":{"start":{"line":92,"column":8},"end":{"line":92,"column":26}},"46":{"start":{"line":93,"column":8},"end":{"line":93,"column":27}},"47":{"start":{"line":94,"column":8},"end":{"line":94,"column":68}},"48":{"start":{"line":97,"column":22},"end":{"line":97,"column":43}},"49":{"start":{"line":98,"column":24},"end":{"line":100,"column":20}},"50":{"start":{"line":101,"column":8},"end":{"line":106,"column":10}},"51":{"start":{"line":109,"column":8},"end":{"line":109,"column":35}},"52":{"start":{"line":112,"column":8},"end":{"line":112,"column":38}},"53":{"start":{"line":115,"column":8},"end":{"line":115,"column":40}},"54":{"start":{"line":118,"column":8},"end":{"line":118,"column":33}},"55":{"start":{"line":121,"column":8},"end":{"line":121,"column":40}},"56":{"start":{"line":124,"column":8},"end":{"line":124,"column":27}},"57":{"start":{"line":125,"column":8},"end":{"line":125,"column":75}},"58":{"start":{"line":128,"column":0},"end":{"line":128,"column":36}},"59":{"start":{"line":129,"column":0},"end":{"line":129,"column":69}},"60":{"start":{"line":130,"column":0},"end":{"line":170,"column":2}},"61":{"start":{"line":132,"column":23},"end":{"line":132,"column":52}},"62":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"63":{"start":{"line":134,"column":12},"end":{"line":134,"column":26}},"64":{"start":{"line":136,"column":8},"end":{"line":144,"column":9}},"65":{"start":{"line":137,"column":25},"end":{"line":137,"column":40}},"66":{"start":{"line":138,"column":12},"end":{"line":138,"column":53}},"67":{"start":{"line":139,"column":12},"end":{"line":139,"column":24}},"68":{"start":{"line":142,"column":12},"end":{"line":142,"column":77}},"69":{"start":{"line":143,"column":12},"end":{"line":143,"column":24}},"70":{"start":{"line":147,"column":20},"end":{"line":147,"column":75}},"71":{"start":{"line":148,"column":8},"end":{"line":148,"column":56}},"72":{"start":{"line":151,"column":20},"end":{"line":151,"column":75}},"73":{"start":{"line":152,"column":8},"end":{"line":152,"column":45}},"74":{"start":{"line":155,"column":20},"end":{"line":155,"column":80}},"75":{"start":{"line":156,"column":8},"end":{"line":156,"column":56}},"76":{"start":{"line":159,"column":20},"end":{"line":159,"column":80}},"77":{"start":{"line":160,"column":8},"end":{"line":160,"column":45}},"78":{"start":{"line":163,"column":20},"end":{"line":163,"column":63}},"79":{"start":{"line":164,"column":8},"end":{"line":164,"column":61}},"80":{"start":{"line":167,"column":20},"end":{"line":167,"column":63}},"81":{"start":{"line":168,"column":8},"end":{"line":168,"column":45}},"82":{"start":{"line":171,"column":0},"end":{"line":171,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":51},"end":{"line":39,"column":5}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":33},"end":{"line":32,"column":34}},"loc":{"start":{"line":32,"column":50},"end":{"line":34,"column":9}},"line":32},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":29},"end":{"line":35,"column":30}},"loc":{"start":{"line":35,"column":46},"end":{"line":37,"column":9}},"line":35},"4":{"name":"(anonymous_4)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":13},"end":{"line":51,"column":5}},"line":40},"5":{"name":"(anonymous_5)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":25},"end":{"line":58,"column":5}},"line":52},"6":{"name":"(anonymous_6)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":16},"end":{"line":63,"column":5}},"line":59},"7":{"name":"(anonymous_7)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":27},"end":{"line":74,"column":5}},"line":64},"8":{"name":"(anonymous_8)","decl":{"start":{"line":67,"column":41},"end":{"line":67,"column":42}},"loc":{"start":{"line":67,"column":48},"end":{"line":67,"column":63}},"line":67},"9":{"name":"(anonymous_9)","decl":{"start":{"line":75,"column":4},"end":{"line":75,"column":5}},"loc":{"start":{"line":75,"column":31},"end":{"line":77,"column":5}},"line":75},"10":{"name":"(anonymous_10)","decl":{"start":{"line":78,"column":4},"end":{"line":78,"column":5}},"loc":{"start":{"line":78,"column":28},"end":{"line":80,"column":5}},"line":78},"11":{"name":"(anonymous_11)","decl":{"start":{"line":81,"column":4},"end":{"line":81,"column":5}},"loc":{"start":{"line":81,"column":32},"end":{"line":83,"column":5}},"line":81},"12":{"name":"(anonymous_12)","decl":{"start":{"line":84,"column":4},"end":{"line":84,"column":5}},"loc":{"start":{"line":84,"column":32},"end":{"line":89,"column":5}},"line":84},"13":{"name":"(anonymous_13)","decl":{"start":{"line":90,"column":4},"end":{"line":90,"column":5}},"loc":{"start":{"line":90,"column":12},"end":{"line":95,"column":5}},"line":90},"14":{"name":"(anonymous_14)","decl":{"start":{"line":96,"column":4},"end":{"line":96,"column":5}},"loc":{"start":{"line":96,"column":15},"end":{"line":107,"column":5}},"line":96},"15":{"name":"(anonymous_15)","decl":{"start":{"line":108,"column":4},"end":{"line":108,"column":5}},"loc":{"start":{"line":108,"column":13},"end":{"line":110,"column":5}},"line":108},"16":{"name":"(anonymous_16)","decl":{"start":{"line":111,"column":4},"end":{"line":111,"column":5}},"loc":{"start":{"line":111,"column":16},"end":{"line":113,"column":5}},"line":111},"17":{"name":"(anonymous_17)","decl":{"start":{"line":114,"column":4},"end":{"line":114,"column":5}},"loc":{"start":{"line":114,"column":24},"end":{"line":116,"column":5}},"line":114},"18":{"name":"(anonymous_18)","decl":{"start":{"line":117,"column":4},"end":{"line":117,"column":5}},"loc":{"start":{"line":117,"column":14},"end":{"line":119,"column":5}},"line":117},"19":{"name":"(anonymous_19)","decl":{"start":{"line":120,"column":4},"end":{"line":120,"column":5}},"loc":{"start":{"line":120,"column":14},"end":{"line":122,"column":5}},"line":120},"20":{"name":"(anonymous_20)","decl":{"start":{"line":123,"column":4},"end":{"line":123,"column":5}},"loc":{"start":{"line":123,"column":12},"end":{"line":126,"column":5}},"line":123},"21":{"name":"(anonymous_21)","decl":{"start":{"line":131,"column":4},"end":{"line":131,"column":5}},"loc":{"start":{"line":131,"column":40},"end":{"line":145,"column":5}},"line":131},"22":{"name":"(anonymous_22)","decl":{"start":{"line":146,"column":4},"end":{"line":146,"column":5}},"loc":{"start":{"line":146,"column":76},"end":{"line":149,"column":5}},"line":146},"23":{"name":"(anonymous_23)","decl":{"start":{"line":150,"column":4},"end":{"line":150,"column":5}},"loc":{"start":{"line":150,"column":34},"end":{"line":153,"column":5}},"line":150},"24":{"name":"(anonymous_24)","decl":{"start":{"line":154,"column":4},"end":{"line":154,"column":5}},"loc":{"start":{"line":154,"column":68},"end":{"line":157,"column":5}},"line":154},"25":{"name":"(anonymous_25)","decl":{"start":{"line":158,"column":4},"end":{"line":158,"column":5}},"loc":{"start":{"line":158,"column":27},"end":{"line":161,"column":5}},"line":158},"26":{"name":"(anonymous_26)","decl":{"start":{"line":162,"column":4},"end":{"line":162,"column":5}},"loc":{"start":{"line":162,"column":72},"end":{"line":165,"column":5}},"line":162},"27":{"name":"(anonymous_27)","decl":{"start":{"line":166,"column":4},"end":{"line":166,"column":5}},"loc":{"start":{"line":166,"column":25},"end":{"line":169,"column":5}},"line":166}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":49}},"type":"default-arg","locations":[{"start":{"line":22,"column":22},"end":{"line":22,"column":49}}],"line":22},"4":{"loc":{"start":{"line":42,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":49,"column":9}},{"start":{"line":46,"column":13},"end":{"line":49,"column":9}}],"line":42},"5":{"loc":{"start":{"line":53,"column":51},"end":{"line":53,"column":59}},"type":"binary-expr","locations":[{"start":{"line":53,"column":51},"end":{"line":53,"column":54}},{"start":{"line":53,"column":58},"end":{"line":53,"column":59}}],"line":53},"6":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{},"end":{}}],"line":54},"7":{"loc":{"start":{"line":55,"column":45},"end":{"line":55,"column":73}},"type":"cond-expr","locations":[{"start":{"line":55,"column":51},"end":{"line":55,"column":68}},{"start":{"line":55,"column":71},"end":{"line":55,"column":73}}],"line":55},"8":{"loc":{"start":{"line":68,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":72,"column":9}},{"start":{},"end":{}}],"line":68},"9":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{},"end":{}}],"line":85},"10":{"loc":{"start":{"line":98,"column":24},"end":{"line":100,"column":20}},"type":"cond-expr","locations":[{"start":{"line":99,"column":14},"end":{"line":99,"column":83}},{"start":{"line":100,"column":14},"end":{"line":100,"column":20}}],"line":98},"11":{"loc":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},{"start":{},"end":{}}],"line":133},"12":{"loc":{"start":{"line":146,"column":42},"end":{"line":146,"column":74}},"type":"default-arg","locations":[{"start":{"line":146,"column":48},"end":{"line":146,"column":74}}],"line":146},"13":{"loc":{"start":{"line":154,"column":35},"end":{"line":154,"column":66}},"type":"default-arg","locations":[{"start":{"line":154,"column":41},"end":{"line":154,"column":66}}],"line":154},"14":{"loc":{"start":{"line":162,"column":38},"end":{"line":162,"column":70}},"type":"default-arg","locations":[{"start":{"line":162,"column":44},"end":{"line":162,"column":70}}],"line":162}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1},"f":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0],"13":[0],"14":[0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/cache-manager.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/cache-manager.ts"],"names":[],"mappings":"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","sourcesContent":["import NodeCache from \"node-cache\";\n\nexport const CACHE_CONFIG = {\n  SHORT: 5 * 60, \n  MEDIUM: 30 * 60,\n  LONG: 2 * 60 * 60,\n  EXTENDED: 6 * 60 * 60\n};\n\n// Cache key prefixes for organization\nexport const CACHE_KEYS = {\n  POKEMON_LIST: 'pokemon:list',\n  POKEMON_DETAIL: 'pokemon:detail',\n  POKEMON_SPECIES: 'pokemon:species',\n  FAVORITES: 'favorites',\n  USER_DATA: 'user',\n};\n\nexport class CacheManager {\n  private cache: NodeCache;\n  private hitCount: number = 0;\n  private missCount: number = 0;\n\n  constructor(ttl: number = CACHE_CONFIG.MEDIUM) {\n    this.cache = new NodeCache({\n      stdTTL: ttl,\n      checkperiod: 120,\n      useClones: false,\n      deleteOnExpire: true,\n      maxKeys: 1000,\n    });\n\n    // Log cache events\n    this.cache.on('expired', (key, _value) => {\n      logger.info(`Cache key expired: ${key}`, {trace: 'cache.manager.ts'});\n    });\n\n    this.cache.on('del', (key, _value) => {\n      logger.debug(`Cache key deleted: ${key}`, {trace: 'cache.manager.ts'});\n    });\n\n    logger.info('Cache manager initialized', {trace: 'cache.manager.ts'});\n  }\n\n  /**\n   * Get value from cache\n   */\n  get<T>(key: string): T | undefined {\n    const value = this.cache.get<T>(key);\n    \n    if (value !== undefined) {\n      this.hitCount++;\n      logger.debug(`Cache hit: ${key}`, {trace: 'cache.manager.ts'});\n    } else {\n      this.missCount++;\n      logger.debug(`Cache miss: ${key}`, {trace: 'cache.manager.ts'});\n    }\n    \n    return value;\n  }\n\n  /**\n   * Set value in cache with optional custom TTL\n   */\n  set<T>(key: string, value: T, ttl?: number): boolean {\n    const success = this.cache.set(key, value, ttl || 0);\n    \n    if (success) {\n      logger.debug(`Cache set: ${key}${ttl ? ` (TTL: ${ttl}s)` : ''}`, {trace: 'cache.manager.ts'});\n    }\n    \n    return success;\n  }\n\n  /**\n   * Delete a specific key\n   */\n  delete(key: string): number {\n    const deleted = this.cache.del(key);\n    logger.debug(`Cache deleted: ${key}`, {trace: 'cache.manager.ts'});\n    return deleted;\n  }\n\n  /**\n   * Delete keys matching a pattern (e.g., \"pokemon:detail:*\")\n   */\n  deletePattern(pattern: string): number {\n    const keys = this.cache.keys();\n    const regex = new RegExp(pattern.replace('*', '.*'));\n    const matchingKeys = keys.filter(key => regex.test(key));\n    \n    if (matchingKeys.length > 0) {\n      const deleted = this.cache.del(matchingKeys);\n      logger.info(`Deleted ${deleted} cache keys matching pattern: ${pattern}`, {trace: 'cache.manager.ts'});\n      return deleted;\n    }\n    \n    return 0;\n  }\n\n  /**\n   * Invalidate all Pokemon detail caches\n   */\n  invalidatePokemonDetails(): number {\n    return this.deletePattern(`${CACHE_KEYS.POKEMON_DETAIL}:*`);\n  }\n\n  /**\n   * Invalidate specific Pokemon cache\n   */\n  invalidatePokemon(name: string): number {\n    return this.delete(`${CACHE_KEYS.POKEMON_DETAIL}:${name}`);\n  }\n\n  /**\n   * Invalidate user-specific caches\n   */\n  invalidateUserCache(userId: string): number {\n    return this.deletePattern(`${CACHE_KEYS.USER_DATA}:${userId}:*`);\n  }\n\n  /**\n   * Invalidate favorites cache\n   */\n  invalidateFavorites(userId?: string): number {\n    if (userId) {\n      return this.delete(`${CACHE_KEYS.FAVORITES}:${userId}`);\n    }\n    return this.deletePattern(`${CACHE_KEYS.FAVORITES}:*`);\n  }\n\n  /**\n   * Clear entire cache\n   */\n  flush(): void {\n    this.cache.flushAll();\n    this.hitCount = 0;\n    this.missCount = 0;\n    logger.info('Cache flushed', {trace: 'cache.manager.ts'});\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getStats() {\n    const stats = this.cache.getStats();\n    const hitRate = this.hitCount + this.missCount > 0\n      ? ((this.hitCount / (this.hitCount + this.missCount)) * 100).toFixed(2)\n      : '0.00';\n\n    return {\n      ...stats,\n      hitCount: this.hitCount,\n      missCount: this.missCount,\n      hitRate: `${hitRate}%`,\n    };\n  }\n\n  /**\n   * Check if key exists\n   */\n  has(key: string): boolean {\n    return this.cache.has(key);\n  }\n\n  /**\n   * Get remaining TTL for a key (in seconds)\n   */\n  getTTL(key: string): number | undefined {\n    return this.cache.getTtl(key);\n  }\n\n  /**\n   * Update TTL for existing key\n   */\n  updateTTL(key: string, ttl: number): boolean {\n    return this.cache.ttl(key, ttl);\n  }\n\n  /**\n   * Get all keys\n   */\n  getKeys(): string[] {\n    return this.cache.keys();\n  }\n\n  /**\n   * Get cache size\n   */\n  getSize(): number {\n    return this.cache.keys().length;\n  }\n\n  /**\n   * Close cache\n   */\n  close(): void {\n    this.cache.close();\n    logger.info('Cache manager closed', {trace: 'cache.manager.ts'});\n  }\n}\n\n// Singleton instance\nexport const cacheManager = new CacheManager(CACHE_CONFIG.MEDIUM);\n\n// Helper functions for common cache operations\nexport const CacheHelpers = {\n  /**\n   * Get or set cache with a fetcher function\n   */\n  async getOrFetch<T>(\n    key: string,\n    fetcher: () => Promise<T>,\n    ttl?: number\n  ): Promise<T> {\n    // Try to get from cache\n    const cached = cacheManager.get<T>(key);\n    if (cached !== undefined) {\n      return cached;\n    }\n\n    // Fetch and cache\n    try {\n      const data = await fetcher();\n      cacheManager.set(key, data, ttl);\n      return data;\n    } catch (error) {\n      logger.error(`Error fetching data for cache key ${key}:`, error);\n      throw error;\n    }\n  },\n\n  /**\n   * Cache Pokemon list with pagination info\n   */\n  cachePokemonList(offset: number, limit: number, data: any, ttl = CACHE_CONFIG.SHORT) {\n    const key = `${CACHE_KEYS.POKEMON_LIST}:${offset}:${limit}`;\n    return cacheManager.set(key, data, ttl);\n  },\n\n  /**\n   * Get cached Pokemon list\n   */\n  getPokemonList(offset: number, limit: number) {\n    const key = `${CACHE_KEYS.POKEMON_LIST}:${offset}:${limit}`;\n    return cacheManager.get(key);\n  },\n\n  /**\n   * Cache Pokemon details\n   */\n  cachePokemonDetail(name: string, data: any, ttl = CACHE_CONFIG.LONG) {\n    const key = `${CACHE_KEYS.POKEMON_DETAIL}:${name.toLowerCase()}`;\n    return cacheManager.set(key, data, ttl);\n  },\n\n  /**\n   * Get cached Pokemon details\n   */\n  getPokemonDetail(name: string) {\n    const key = `${CACHE_KEYS.POKEMON_DETAIL}:${name.toLowerCase()}`;\n    return cacheManager.get(key);\n  },\n\n  /**\n   * Cache user favorites\n   */\n  cacheFavorites(userId: string, favorites: any[], ttl = CACHE_CONFIG.SHORT) {\n    const key = `${CACHE_KEYS.FAVORITES}:${userId}`;\n    return cacheManager.set(key, favorites, ttl);\n  },\n\n  /**\n   * Get cached favorites\n   */\n  getFavorites(userId: string) {\n    const key = `${CACHE_KEYS.FAVORITES}:${userId}`;\n    return cacheManager.get(key);\n  },\n};\n\nexport default cacheManager;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c5e5689b099c43bcb23ef1f50ae6204cabfb0878","contentHash":"b50e41dd16187ccfe38069d06b5aca9e4d115e7c0f4fdf69ce8a3c2a1f754b83"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/response.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/response.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":56}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":21},"end":{"line":13,"column":1}},"5":{"start":{"line":7,"column":4},"end":{"line":12,"column":7}},"6":{"start":{"line":14,"column":14},"end":{"line":34,"column":1}},"7":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":112}},"9":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"10":{"start":{"line":19,"column":8},"end":{"line":19,"column":99}},"11":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"12":{"start":{"line":22,"column":8},"end":{"line":22,"column":102}},"13":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"14":{"start":{"line":25,"column":8},"end":{"line":25,"column":100}},"15":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":103}},"17":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"18":{"start":{"line":31,"column":8},"end":{"line":31,"column":100}},"19":{"start":{"line":33,"column":4},"end":{"line":33,"column":108}},"20":{"start":{"line":35,"column":16},"end":{"line":37,"column":1}},"21":{"start":{"line":36,"column":4},"end":{"line":36,"column":61}},"22":{"start":{"line":38,"column":20},"end":{"line":47,"column":1}},"23":{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},"24":{"start":{"line":40,"column":8},"end":{"line":40,"column":31}},"25":{"start":{"line":42,"column":4},"end":{"line":45,"column":5}},"26":{"start":{"line":43,"column":8},"end":{"line":43,"column":47}},"27":{"start":{"line":44,"column":8},"end":{"line":44,"column":24}},"28":{"start":{"line":46,"column":4},"end":{"line":46,"column":92}},"29":{"start":{"line":48,"column":0},"end":{"line":48,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":21},"end":{"line":6,"column":22}},"loc":{"start":{"line":6,"column":59},"end":{"line":13,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":14},"end":{"line":14,"column":15}},"loc":{"start":{"line":14,"column":30},"end":{"line":34,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":35,"column":16},"end":{"line":35,"column":17}},"loc":{"start":{"line":35,"column":46},"end":{"line":37,"column":1}},"line":35},"3":{"name":"(anonymous_3)","decl":{"start":{"line":38,"column":20},"end":{"line":38,"column":21}},"loc":{"start":{"line":38,"column":70},"end":{"line":47,"column":1}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},{"start":{},"end":{}}],"line":15},"1":{"loc":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},{"start":{},"end":{}}],"line":18},"2":{"loc":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},{"start":{},"end":{}}],"line":21},"3":{"loc":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},{"start":{},"end":{}}],"line":24},"4":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},{"start":{},"end":{}}],"line":27},"5":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{},"end":{}}],"line":30},"6":{"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":53}},"type":"default-arg","locations":[{"start":{"line":38,"column":41},"end":{"line":38,"column":53}}],"line":38},"7":{"loc":{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},{"start":{},"end":{}}],"line":39},"8":{"loc":{"start":{"line":42,"column":4},"end":{"line":45,"column":5}},"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":45,"column":5}},{"start":{},"end":{}}],"line":42},"9":{"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":50}},"type":"binary-expr","locations":[{"start":{"line":42,"column":8},"end":{"line":42,"column":11}},{"start":{"line":42,"column":15},"end":{"line":42,"column":23}},{"start":{"line":42,"column":27},"end":{"line":42,"column":50}}],"line":42},"10":{"loc":{"start":{"line":46,"column":24},"end":{"line":46,"column":66}},"type":"binary-expr","locations":[{"start":{"line":46,"column":24},"end":{"line":46,"column":28}},{"start":{"line":46,"column":32},"end":{"line":46,"column":66}}],"line":46},"11":{"loc":{"start":{"line":46,"column":78},"end":{"line":46,"column":89}},"type":"binary-expr","locations":[{"start":{"line":46,"column":78},"end":{"line":46,"column":82}},{"start":{"line":46,"column":86},"end":{"line":46,"column":89}}],"line":46}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/response.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/response.ts"],"names":[],"mappings":";;;AACA,yDAAgD;AAChD,qCAOkB;AAElB,MAAM,YAAY,GAAG,CACnB,GAAa,EACb,MAA2B,EAC3B,IAAY,EACZ,OAAe,EACf,IAAU,EACV,EAAE;IACF,OAAO,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;QAC3B,MAAM;QACN,IAAI;QACJ,OAAO;QACP,IAAI;KACL,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,KAAK,GAAG,CAAC,GAAa,EAAE,KAAU,EAAE,EAAE;IAC1C,IAAI,KAAK,YAAY,oCAA2B,EAAE,CAAC;QACjD,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,+BAAW,CAAC,qBAAqB,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IACtF,CAAC;IACD,IAAI,KAAK,YAAY,0BAAiB,EAAE,CAAC;QACvC,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,+BAAW,CAAC,QAAQ,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IACzE,CAAC;IACD,IAAI,KAAK,YAAY,qBAAY,EAAE,CAAC;QAClC,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,+BAAW,CAAC,WAAW,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAC5E,CAAC;IACD,IAAI,KAAK,YAAY,2BAAkB,EAAE,CAAC;QACxC,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,+BAAW,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAC1E,CAAC;IACD,IAAI,KAAK,YAAY,8BAAqB,EAAE,CAAC;QAC3C,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,+BAAW,CAAC,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAC7E,CAAC;IACD,IAAI,KAAK,YAAY,0BAAiB,EAAE,CAAC;QACvC,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,+BAAW,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAC1E,CAAC;IACD,OAAO,YAAY,CACjB,GAAG,EACH,OAAO,EACP,+BAAW,CAAC,qBAAqB,EACjC,KAAK,CAAC,OAAO,CACd,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,OAAO,GAAG,CAAC,GAAa,EAAE,IAAY,EAAE,OAAe,EAAE,IAAU,EAAE,EAAE;IAC3E,OAAO,YAAY,CAAC,GAAG,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;AAC3D,CAAC,CAAC;AAEK,MAAM,WAAW,GAAG,CACzB,GAAa,EACb,GAAQ,EACR,OAAO,GAAG,YAAY,EACtB,IAAa,EACb,IAAU,EACV,EAAE;IACF,IAAI,GAAG,YAAY,KAAK,EAAE,CAAC;QACzB,OAAO,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACzB,CAAC;IACD,IAAI,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,YAAY,KAAK,CAAC,EAAE,CAAC;QAC/C,GAAG,CAAC,SAAS,CAAC,aAAa,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;QAGvC,OAAO,GAAG,CAAC,IAAI,CAAC;IAClB,CAAC;IAED,OAAO,OAAO,CAAC,GAAG,EAAE,IAAI,IAAI,+BAAW,CAAC,EAAE,EAAE,OAAO,EAAE,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC;AACtE,CAAC,CAAC;AAlBW,QAAA,WAAW,eAkBtB","sourcesContent":["import { Response } from 'express';\nimport { StatusCodes } from 'http-status-codes';\nimport {\n  BadException,\n  ConflictException,\n  ForbiddenException,\n  NotFoundException,\n  ServiceUnavailableException,\n  UnAuthorizedException,\n} from './errors';\n\nconst sendResponse = (\n  res: Response,\n  status: 'success' | 'error',\n  code: number,\n  message: string,\n  data?: any\n) => {\n  return res.status(code).json({\n    status,\n    code,\n    message,\n    data,\n  });\n};\n\nconst error = (res: Response, error: any) => {\n  if (error instanceof ServiceUnavailableException) {\n    return sendResponse(res, 'error', StatusCodes.INTERNAL_SERVER_ERROR, error.message);\n  }\n  if (error instanceof ConflictException) {\n    return sendResponse(res, 'error', StatusCodes.CONFLICT, error.message);\n  }\n  if (error instanceof BadException) {\n    return sendResponse(res, 'error', StatusCodes.BAD_REQUEST, error.message);\n  }\n  if (error instanceof ForbiddenException) {\n    return sendResponse(res, 'error', StatusCodes.FORBIDDEN, error.message);\n  }\n  if (error instanceof UnAuthorizedException) {\n    return sendResponse(res, 'error', StatusCodes.UNAUTHORIZED, error.message);\n  }\n  if (error instanceof NotFoundException) {\n    return sendResponse(res, 'error', StatusCodes.NOT_FOUND, error.message);\n  }\n  return sendResponse(\n    res,\n    'error',\n    StatusCodes.INTERNAL_SERVER_ERROR,\n    error.message\n  );\n};\n\nconst success = (res: Response, code: number, message: string, data?: any) => {\n  return sendResponse(res, 'success', code, message, data);\n};\n\nexport const ApiResponse = (\n  res: Response,\n  err: any,\n  message = 'Successful',\n  code?: number,\n  data?: any,\n) => {\n  if (err instanceof Error) {\n    return error(res, err);\n  }\n  if (err && err.hash && !(err instanceof Error)) {\n    res.setHeader('hash-id-key', err.hash);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //@ts-ignore\n    delete err.hash;\n  }\n  \n  return success(res, code ?? StatusCodes.OK, message, (data ?? err));\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ce329a3769fa0a93909eef13a6066fe6a834f399","contentHash":"37efa35f961ba467f959b1d100753424768d35922c8191de7974e96ddf63af7f"},"/Users/user/Documents/GitHub/firefly/backend/src/middleware/watch-async-controller.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/watch-async-controller.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":29},"end":{"line":12,"column":1}},"3":{"start":{"line":4,"column":37},"end":{"line":12,"column":1}},"4":{"start":{"line":5,"column":4},"end":{"line":11,"column":7}},"5":{"start":{"line":6,"column":8},"end":{"line":10,"column":11}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":29},"end":{"line":4,"column":30}},"loc":{"start":{"line":4,"column":37},"end":{"line":12,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":37},"end":{"line":4,"column":38}},"loc":{"start":{"line":4,"column":51},"end":{"line":12,"column":1}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":40},"end":{"line":5,"column":41}},"loc":{"start":{"line":5,"column":51},"end":{"line":11,"column":5}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":49}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":32}},{"start":{"line":9,"column":36},"end":{"line":9,"column":49}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":8,"4":0,"5":0,"6":1},"f":{"0":8,"1":0,"2":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/watch-async-controller.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/middleware/watch-async-controller.ts"],"names":[],"mappings":";;;AAGO,MAAM,oBAAoB,GAC/B,CAAC,EAAqB,EAAE,EAAE,CAAC,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;IACzD,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;QAC5C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,MAAM,EAAE,KAAK;YACb,OAAO,EACL,0EAA0E;YAC5E,MAAM,EAAE,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO;SACtC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAVS,QAAA,oBAAoB,wBAU7B","sourcesContent":["import { Request, Response } from 'express';\nimport { ExpressController } from '../types';\n\nexport const WatchAsyncController =\n  (fn: ExpressController) => (req: Request, res: Response) => {\n    Promise.resolve(fn(req, res)).catch((error) => {\n      return res.status(500).json({\n        status: false,\n        message:\n          'We encountered a problem while processing your request. Please try again',\n        errors: error.errors || error.message\n      });\n    });\n  };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c31eedcc066a7df42335a85f1779b79d764088e4","contentHash":"e58b2189bc0b6c93655d9d398da5815b09b43c264dd889ecf9409930b6fda525"},"/Users/user/Documents/GitHub/firefly/backend/src/validators/favourite.validator.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/validators/favourite.validator.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":122}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":0},"end":{"line":12,"column":3}},"6":{"start":{"line":13,"column":0},"end":{"line":15,"column":3}},"7":{"start":{"line":16,"column":0},"end":{"line":18,"column":3}},"8":{"start":{"line":19,"column":0},"end":{"line":22,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/validators/favourite.validator.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/validators/favourite.validator.ts"],"names":[],"mappings":";;;;;;AAAA,8CAAsB;AAET,QAAA,mBAAmB,GAAG,aAAG,CAAC,MAAM,CAAC;IAC5C,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;IACrD,MAAM,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE;IAC9C,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC;CACjC,CAAC,CAAC;AACU,QAAA,iBAAiB,GAAG,aAAG,CAAC,MAAM,CAAC;IAC1C,WAAW,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;CACnD,CAAC,CAAC;AACU,QAAA,iBAAiB,GAAG,aAAG,CAAC,MAAM,CAAC;IAC1C,WAAW,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE;CAC3D,CAAC,CAAC;AACU,QAAA,kBAAkB,GAAG,aAAG,CAAC,MAAM,CAAC;IAC3C,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE;IAC3C,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE;CACxD,CAAC,CAAC","sourcesContent":["import Joi from \"joi\";\n\nexport const filterPokemonSchema = Joi.object({\n  limit: Joi.number().label('Limit').max(20).required(),\n  offset: Joi.number().label('Limit').required(),\n  name: Joi.string().label('Name'),\n});\nexport const pokemonNameSchema = Joi.object({\n  pokemonName: Joi.string().label('Name').required()\n});\nexport const favouriteIdSchema = Joi.object({\n  favouriteId: Joi.string().label('Favourite ID').required()\n});\nexport const addFavouriteSchema = Joi.object({\n  name: Joi.string().label('Name').required(),\n  imageUrl: Joi.string().uri().label('Avatar').required(),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e9309da430920c9013a24d31f9e7a34cd10a4ffb","contentHash":"bb820b4b45de02ec1b27202635e277668bcb4727af338be71af2171e8e59aa0f"},"/Users/user/Documents/GitHub/firefly/backend/src/middleware/request-body-validator.middleware.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/request-body-validator.middleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":48}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":56}},"3":{"start":{"line":5,"column":39},"end":{"line":24,"column":1}},"4":{"start":{"line":5,"column":67},"end":{"line":24,"column":1}},"5":{"start":{"line":6,"column":20},"end":{"line":11,"column":5}},"6":{"start":{"line":12,"column":20},"end":{"line":12,"column":53}},"7":{"start":{"line":13,"column":17},"end":{"line":13,"column":30}},"8":{"start":{"line":14,"column":29},"end":{"line":14,"column":69}},"9":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":22}},"11":{"start":{"line":18,"column":24},"end":{"line":18,"column":57}},"12":{"start":{"line":19,"column":4},"end":{"line":23,"column":7}},"13":{"start":{"line":25,"column":0},"end":{"line":25,"column":72}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":39},"end":{"line":5,"column":40}},"loc":{"start":{"line":5,"column":67},"end":{"line":24,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":5,"column":67},"end":{"line":5,"column":68}},"loc":{"start":{"line":5,"column":87},"end":{"line":24,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},{"start":{},"end":{}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":5,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":5,"1":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/request-body-validator.middleware.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/middleware/request-body-validator.middleware.ts"],"names":[],"mappings":";;;AACA,yDAAgD;AAGzC,MAAM,8BAA8B,GACzC,CACE,gBAAkC,EAClC,IAAgD,EAChD,EAAE,CACJ,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAClD,MAAM,OAAO,GAAG;QACd,OAAO,EAAE,GAAG,CAAC,IAAI;QACjB,MAAM,EAAE,GAAG,CAAC,MAAM;QAClB,KAAK,EAAE,GAAG,CAAC,KAAK;QAChB,OAAO,EAAE,GAAG,CAAC,OAAO;KACrB,CAAC;IAEF,MAAM,OAAO,GAAG,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,UAAU,EAAE,EAAE,CAAC;IAClD,MAAM,IAAI,GAAI,OAA+B,CAAC,IAAI,CAAC,CAAC;IAEpD,MAAM,gBAAgB,GAAG,gBAAgB,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAClE,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAC5B,OAAO,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,MAAM,EAAE,OAAO,EAAE,GAAG,gBAAgB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACtD,OAAO,GAAG,CAAC,MAAM,CAAC,+BAAW,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC;QACvD,MAAM,EAAE,OAAO;QACf,UAAU,EAAE,+BAAW,CAAC,oBAAoB;QAC5C,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;KACpC,CAAC,CAAC;AACL,CAAC,CAAC;AA3BS,QAAA,8BAA8B,kCA2BvC","sourcesContent":["import Joi from 'joi';\nimport { StatusCodes } from 'http-status-codes';\nimport { Request, Response, NextFunction } from 'express';\n\nexport const RequestBodyValidatorMiddleware =\n  (\n    validationSchema: Joi.ObjectSchema,\n    type: 'payload' | 'params' | 'query' | 'headers',\n  ) =>\n  (req: Request, res: Response, next: NextFunction) => {\n    const getType = {\n      payload: req.body,\n      params: req.params,\n      query: req.query,\n      headers: req.headers,\n    };\n\n    const options = { messages: { key: '{{key}} ' } };\n    const data = (getType as Record<string, any>)[type]; // Type assertion here\n\n    const validationResult = validationSchema.validate(data, options);\n    if (!validationResult.error) {\n      return next();\n    }\n\n    const { message } = validationResult.error.details[0];\n    return res.status(StatusCodes.UNPROCESSABLE_ENTITY).json({\n      status: 'error',\n      statusCode: StatusCodes.UNPROCESSABLE_ENTITY,\n      message: message.replace(/\"/gi, ''),\n    });\n  };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3a0cd63f44c9d4a9794175b016ed047f4d65e440","contentHash":"90c1b15ff7dbd202eed92bd2ea2e4b00ef261346039dfc6fcb6ba09f7094320d"},"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/favourite.routes.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/favourite.routes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"15":{"start":{"line":19,"column":18},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"17":{"start":{"line":21,"column":21},"end":{"line":21,"column":23}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":95}},"19":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"20":{"start":{"line":22,"column":77},"end":{"line":22,"column":95}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":22}},"22":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"23":{"start":{"line":27,"column":4},"end":{"line":33,"column":6}},"24":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"25":{"start":{"line":28,"column":35},"end":{"line":28,"column":46}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":23}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"28":{"start":{"line":30,"column":25},"end":{"line":30,"column":137}},"29":{"start":{"line":30,"column":38},"end":{"line":30,"column":50}},"30":{"start":{"line":30,"column":56},"end":{"line":30,"column":57}},"31":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"32":{"start":{"line":30,"column":102},"end":{"line":30,"column":137}},"33":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"34":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"35":{"start":{"line":35,"column":22},"end":{"line":37,"column":1}},"36":{"start":{"line":36,"column":4},"end":{"line":36,"column":62}},"37":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"38":{"start":{"line":39,"column":18},"end":{"line":39,"column":36}},"39":{"start":{"line":40,"column":25},"end":{"line":40,"column":86}},"40":{"start":{"line":41,"column":31},"end":{"line":41,"column":97}},"41":{"start":{"line":42,"column":33},"end":{"line":42,"column":83}},"42":{"start":{"line":43,"column":44},"end":{"line":43,"column":105}},"43":{"start":{"line":44,"column":24},"end":{"line":44,"column":47}},"44":{"start":{"line":45,"column":0},"end":{"line":45,"column":125}},"45":{"start":{"line":46,"column":0},"end":{"line":46,"column":243}},"46":{"start":{"line":47,"column":0},"end":{"line":47,"column":258}},"47":{"start":{"line":48,"column":0},"end":{"line":48,"column":245}},"48":{"start":{"line":49,"column":0},"end":{"line":49,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":51},"end":{"line":18,"column":52}},"loc":{"start":{"line":18,"column":63},"end":{"line":34,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":48},"end":{"line":20,"column":49}},"loc":{"start":{"line":20,"column":61},"end":{"line":24,"column":9}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":26},"end":{"line":33,"column":5}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":35,"column":56},"end":{"line":35,"column":57}},"loc":{"start":{"line":35,"column":71},"end":{"line":37,"column":1}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":34,"column":4}}],"line":18},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":24,"column":9}},"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":44}},{"start":{"line":20,"column":48},"end":{"line":24,"column":9}}],"line":20},"12":{"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"type":"if","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},{"start":{},"end":{}}],"line":22},"13":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},{"start":{},"end":{}}],"line":28},"14":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":15}},{"start":{"line":28,"column":19},"end":{"line":28,"column":33}}],"line":28},"15":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"16":{"loc":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"17":{"loc":{"start":{"line":35,"column":22},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":35,"column":23},"end":{"line":35,"column":27}},{"start":{"line":35,"column":31},"end":{"line":35,"column":51}},{"start":{"line":35,"column":56},"end":{"line":37,"column":1}}],"line":35},"18":{"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":61}},"type":"cond-expr","locations":[{"start":{"line":36,"column":37},"end":{"line":36,"column":40}},{"start":{"line":36,"column":43},"end":{"line":36,"column":61}}],"line":36},"19":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":33}},"type":"binary-expr","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":15}},{"start":{"line":36,"column":19},"end":{"line":36,"column":33}}],"line":36}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":1,"9":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,0],"12":[0,0],"13":[1,0],"14":[1,1],"15":[0,0],"16":[0,0],"17":[1,1,1],"18":[1,0],"19":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/favourite.routes.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/favourite.routes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAiC;AACjC,uFAAyE;AACzE,kGAAyE;AACzE,oFAA+E;AAC/E,0GAAoG;AAEpG,MAAM,eAAe,GAAG,IAAA,gBAAM,GAAE,CAAC;AAEjC,eAAe,CAAC,GAAG,CAAC,GAAG,EAAE,IAAA,6CAAoB,EAAC,8BAAmB,CAAC,eAAe,CAAC,CAAC,CAAC;AAEpF,eAAe,CAAC,IAAI,CAAC,GAAG,EACpB,IAAA,kEAA8B,EAAC,gBAAgB,CAAC,kBAAkB,EAAE,SAAS,CAAC,EAC9E,IAAA,6CAAoB,EAAC,8BAAmB,CAAC,WAAW,CAAC,CACxD,CAAC;AACF,eAAe,CAAC,MAAM,CAAC,eAAe,EAClC,IAAA,kEAA8B,EAAC,gBAAgB,CAAC,iBAAiB,EAAE,QAAQ,CAAC,EAC5E,IAAA,6CAAoB,EAAC,8BAAmB,CAAC,cAAc,CAAC,CAC3D,CAAC;AACF,eAAe,CAAC,GAAG,CAAC,MAAM,EACtB,IAAA,kEAA8B,EAAC,gBAAgB,CAAC,iBAAiB,EAAE,QAAQ,CAAC,EAC5E,IAAA,6CAAoB,EAAC,8BAAmB,CAAC,aAAa,CAAC,CAC1D,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["import { Router } from \"express\";\nimport * as pokemonValidator from \"../../validators/favourite.validator\";\nimport favouriteController from \"../../controllers/favourite.controller\";\nimport { WatchAsyncController } from \"../../middleware/watch-async-controller\";\nimport { RequestBodyValidatorMiddleware } from \"../../middleware/request-body-validator.middleware\";\n\nconst favouriteRouter = Router();\n\nfavouriteRouter.get('/', WatchAsyncController(favouriteController.getAllFavorites));\n\nfavouriteRouter.post('/', \n    RequestBodyValidatorMiddleware(pokemonValidator.addFavouriteSchema, 'payload'),\n    WatchAsyncController(favouriteController.addFavorite)\n);\nfavouriteRouter.delete('/:favouriteId', \n    RequestBodyValidatorMiddleware(pokemonValidator.favouriteIdSchema, 'params'),\n    WatchAsyncController(favouriteController.removeFavorite)\n);\nfavouriteRouter.get('/:id',\n    RequestBodyValidatorMiddleware(pokemonValidator.favouriteIdSchema, 'params'),\n    WatchAsyncController(favouriteController.checkFavorite)\n);\n\nexport default favouriteRouter;\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"823953631d7c4073c7b773246d5ea8cdc23a9684","contentHash":"d8021dd401691f7491e3b189fdbc527e7bb606c6c080d3bb1460d2846f0bb4f9"},"/Users/user/Documents/GitHub/firefly/backend/src/controllers/favourite.controller.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/controllers/favourite.controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":28},"end":{"line":6,"column":56}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":47}},"5":{"start":{"line":8,"column":28},"end":{"line":8,"column":85}},"6":{"start":{"line":9,"column":19},"end":{"line":9,"column":64}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":49}},"8":{"start":{"line":13,"column":8},"end":{"line":16,"column":10}},"9":{"start":{"line":14,"column":30},"end":{"line":14,"column":75}},"10":{"start":{"line":15,"column":12},"end":{"line":15,"column":144}},"11":{"start":{"line":17,"column":8},"end":{"line":22,"column":10}},"12":{"start":{"line":18,"column":29},"end":{"line":18,"column":32}},"13":{"start":{"line":19,"column":28},"end":{"line":19,"column":39}},"14":{"start":{"line":20,"column":29},"end":{"line":20,"column":77}},"15":{"start":{"line":21,"column":12},"end":{"line":21,"column":144}},"16":{"start":{"line":23,"column":8},"end":{"line":27,"column":10}},"17":{"start":{"line":24,"column":36},"end":{"line":24,"column":46}},"18":{"start":{"line":25,"column":27},"end":{"line":25,"column":82}},"19":{"start":{"line":26,"column":12},"end":{"line":26,"column":147}},"20":{"start":{"line":28,"column":8},"end":{"line":32,"column":10}},"21":{"start":{"line":29,"column":36},"end":{"line":29,"column":46}},"22":{"start":{"line":30,"column":31},"end":{"line":30,"column":82}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":150}},"24":{"start":{"line":35,"column":28},"end":{"line":35,"column":80}},"25":{"start":{"line":36,"column":0},"end":{"line":36,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":34},"end":{"line":33,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":31},"end":{"line":13,"column":32}},"loc":{"start":{"line":13,"column":52},"end":{"line":16,"column":9}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":27},"end":{"line":17,"column":28}},"loc":{"start":{"line":17,"column":47},"end":{"line":22,"column":9}},"line":17},"4":{"name":"(anonymous_4)","decl":{"start":{"line":23,"column":30},"end":{"line":23,"column":31}},"loc":{"start":{"line":23,"column":50},"end":{"line":27,"column":9}},"line":23},"5":{"name":"(anonymous_5)","decl":{"start":{"line":28,"column":29},"end":{"line":28,"column":30}},"loc":{"start":{"line":28,"column":49},"end":{"line":32,"column":9}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":1},"f":{"0":2,"1":1,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/controllers/favourite.controller.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/controllers/favourite.controller.ts"],"names":[],"mappings":";;;;;AAAA,yDAAgD;AAEhD,gDAAgD;AAChD,sFAAoF;AACpF,iEAAyC;AAGzC,MAAM,mBAAmB;IACvB,YAA6B,gBAAmC;QAAnC,qBAAgB,GAAhB,gBAAgB,CAAmB;QAEzD,oBAAe,GAAc,KAAK,EAAC,IAAI,EAAE,GAAG,EAAE,EAAE;YACrD,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC;YAEhE,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,IAAI,EAAE,kBAAQ,CAAC,kBAAkB,EAAE,+BAAW,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QACxF,CAAC,CAAA;QAEM,gBAAW,GAAc,KAAK,EAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YAChD,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC;YACrB,MAAM,OAAO,GAAwB,EAAC,GAAG,IAAI,EAAC,CAAA;YAE9C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;YAElE,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,QAAQ,EAAE,6BAA6B,EAAE,+BAAW,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAClG,CAAC,CAAA;QAEM,mBAAc,GAAc,KAAK,EAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YACnD,MAAM,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAEnC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YACvE,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,MAAM,EAAE,iCAAiC,EAAE,+BAAW,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QACrG,CAAC,CAAA;QAEM,kBAAa,GAAc,KAAK,EAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YAClD,MAAM,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAEnC,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;YAEvE,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,IAAI,EAAE,kBAAQ,CAAC,uBAAuB,EAAE,+BAAW,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;QAC9F,CAAC,CAAA;IA9BkE,CAAC;CA+BrE;AAED,MAAM,mBAAmB,GAAG,IAAI,mBAAmB,CAAC,2BAAgB,CAAC,CAAC;AACtE,kBAAe,mBAAmB,CAAC","sourcesContent":["import { StatusCodes } from \"http-status-codes\";\nimport { fnRequest } from \"../types\";\nimport { ApiResponse } from \"../utils/response\";\nimport favoritesService, { IFavoritesService } from \"../services/favourite.service\";\nimport Messages from \"../utils/messages\";\nimport * as Dto from '../dtos/favourite.dto'\n\nclass FavoritesController {\n  constructor(private readonly favoritesService: IFavoritesService) {}\n\n  public getAllFavorites: fnRequest = async(_req, res) => {\n    const favorites = await this.favoritesService.getAllFavorites();\n      \n    return ApiResponse(res, null, Messages.FAVOURITES_FETCHED, StatusCodes.OK, favorites);\n  }\n\n  public addFavorite: fnRequest = async(req, res) => {\n    const { body } = req;\n    const payload: Dto.AddFavouriteDto = {...body}\n\n    const favorite = await this.favoritesService.addFavorite(payload);\n\n    return ApiResponse(res, favorite, \"Pokemon added to favourites\", StatusCodes.CREATED, favorite);\n  }\n\n  public removeFavorite: fnRequest = async(req, res) => {\n    const { favouriteId } = req.params;\n\n    const result = await this.favoritesService.removeFavorite(favouriteId);\n    return ApiResponse(res, result, \"Pokemon removed from favourites\", StatusCodes.NO_CONTENT, result);\n  }\n\n  public checkFavorite: fnRequest = async(req, res) => {\n    const { favouriteId } = req.params;\n\n    const isFavorite = await this.favoritesService.isFavorite(favouriteId);\n\n    return ApiResponse(res, null, Messages.FAVORITE_ALREADY_EXISTS, StatusCodes.OK, isFavorite);\n  }\n}\n\nconst favoritesController = new FavoritesController(favoritesService);\nexport default favoritesController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"eebd57e9747fc3ca60fba54a64dd4fa6b1177a24","contentHash":"d3cc2e08a2b6d23c10d5e8d10e6cd48210d41ad2929901c26a316d916dc90b8a"},"/Users/user/Documents/GitHub/firefly/backend/src/services/favourite.service.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/services/favourite.service.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"15":{"start":{"line":19,"column":18},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"17":{"start":{"line":21,"column":21},"end":{"line":21,"column":23}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":95}},"19":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"20":{"start":{"line":22,"column":77},"end":{"line":22,"column":95}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":22}},"22":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"23":{"start":{"line":27,"column":4},"end":{"line":33,"column":6}},"24":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"25":{"start":{"line":28,"column":35},"end":{"line":28,"column":46}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":23}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"28":{"start":{"line":30,"column":25},"end":{"line":30,"column":137}},"29":{"start":{"line":30,"column":38},"end":{"line":30,"column":50}},"30":{"start":{"line":30,"column":56},"end":{"line":30,"column":57}},"31":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"32":{"start":{"line":30,"column":102},"end":{"line":30,"column":137}},"33":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"34":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"35":{"start":{"line":35,"column":22},"end":{"line":37,"column":1}},"36":{"start":{"line":36,"column":4},"end":{"line":36,"column":62}},"37":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"38":{"start":{"line":39,"column":17},"end":{"line":39,"column":43}},"39":{"start":{"line":40,"column":37},"end":{"line":40,"column":107}},"40":{"start":{"line":41,"column":24},"end":{"line":41,"column":71}},"41":{"start":{"line":42,"column":17},"end":{"line":42,"column":43}},"42":{"start":{"line":45,"column":8},"end":{"line":45,"column":37}},"43":{"start":{"line":46,"column":8},"end":{"line":46,"column":69}},"44":{"start":{"line":49,"column":25},"end":{"line":49,"column":61}},"45":{"start":{"line":50,"column":23},"end":{"line":50,"column":60}},"46":{"start":{"line":51,"column":8},"end":{"line":54,"column":9}},"47":{"start":{"line":52,"column":12},"end":{"line":52,"column":115}},"48":{"start":{"line":53,"column":12},"end":{"line":53,"column":26}},"49":{"start":{"line":55,"column":26},"end":{"line":55,"column":56}},"50":{"start":{"line":56,"column":8},"end":{"line":56,"column":93}},"51":{"start":{"line":57,"column":8},"end":{"line":57,"column":63}},"52":{"start":{"line":58,"column":8},"end":{"line":58,"column":25}},"53":{"start":{"line":61,"column":23},"end":{"line":61,"column":69}},"54":{"start":{"line":62,"column":8},"end":{"line":65,"column":9}},"55":{"start":{"line":63,"column":12},"end":{"line":63,"column":76}},"56":{"start":{"line":64,"column":12},"end":{"line":64,"column":77}},"57":{"start":{"line":66,"column":8},"end":{"line":66,"column":58}},"58":{"start":{"line":67,"column":8},"end":{"line":67,"column":54}},"59":{"start":{"line":68,"column":8},"end":{"line":68,"column":24}},"60":{"start":{"line":71,"column":22},"end":{"line":71,"column":54}},"61":{"start":{"line":72,"column":8},"end":{"line":75,"column":9}},"62":{"start":{"line":73,"column":12},"end":{"line":73,"column":116}},"63":{"start":{"line":74,"column":12},"end":{"line":74,"column":79}},"64":{"start":{"line":76,"column":21},"end":{"line":76,"column":60}},"65":{"start":{"line":77,"column":8},"end":{"line":77,"column":54}},"66":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"67":{"start":{"line":79,"column":12},"end":{"line":79,"column":24}},"68":{"start":{"line":83,"column":21},"end":{"line":83,"column":60}},"69":{"start":{"line":84,"column":8},"end":{"line":84,"column":56}},"70":{"start":{"line":87,"column":25},"end":{"line":87,"column":83}},"71":{"start":{"line":88,"column":0},"end":{"line":88,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":51},"end":{"line":18,"column":52}},"loc":{"start":{"line":18,"column":63},"end":{"line":34,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":48},"end":{"line":20,"column":49}},"loc":{"start":{"line":20,"column":61},"end":{"line":24,"column":9}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":26},"end":{"line":33,"column":5}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":35,"column":56},"end":{"line":35,"column":57}},"loc":{"start":{"line":35,"column":71},"end":{"line":37,"column":1}},"line":35},"10":{"name":"(anonymous_10)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":28},"end":{"line":47,"column":5}},"line":44},"11":{"name":"(anonymous_11)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":28},"end":{"line":59,"column":5}},"line":48},"12":{"name":"(anonymous_12)","decl":{"start":{"line":60,"column":4},"end":{"line":60,"column":5}},"loc":{"start":{"line":60,"column":35},"end":{"line":69,"column":5}},"line":60},"13":{"name":"(anonymous_13)","decl":{"start":{"line":70,"column":4},"end":{"line":70,"column":5}},"loc":{"start":{"line":70,"column":36},"end":{"line":81,"column":5}},"line":70},"14":{"name":"(anonymous_14)","decl":{"start":{"line":82,"column":4},"end":{"line":82,"column":5}},"loc":{"start":{"line":82,"column":32},"end":{"line":85,"column":5}},"line":82}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":34,"column":4}}],"line":18},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":24,"column":9}},"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":44}},{"start":{"line":20,"column":48},"end":{"line":24,"column":9}}],"line":20},"12":{"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"type":"if","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},{"start":{},"end":{}}],"line":22},"13":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},{"start":{},"end":{}}],"line":28},"14":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":15}},{"start":{"line":28,"column":19},"end":{"line":28,"column":33}}],"line":28},"15":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"16":{"loc":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"17":{"loc":{"start":{"line":35,"column":22},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":35,"column":23},"end":{"line":35,"column":27}},{"start":{"line":35,"column":31},"end":{"line":35,"column":51}},{"start":{"line":35,"column":56},"end":{"line":37,"column":1}}],"line":35},"18":{"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":61}},"type":"cond-expr","locations":[{"start":{"line":36,"column":37},"end":{"line":36,"column":40}},{"start":{"line":36,"column":43},"end":{"line":36,"column":61}}],"line":36},"19":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":33}},"type":"binary-expr","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":15}},{"start":{"line":36,"column":19},"end":{"line":36,"column":33}}],"line":36},"20":{"loc":{"start":{"line":51,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":54,"column":9}},{"start":{},"end":{}}],"line":51},"21":{"loc":{"start":{"line":62,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":65,"column":9}},{"start":{},"end":{}}],"line":62},"22":{"loc":{"start":{"line":72,"column":8},"end":{"line":75,"column":9}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":75,"column":9}},{"start":{},"end":{}}],"line":72},"23":{"loc":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},{"start":{},"end":{}}],"line":78}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,0],"12":[0,0],"13":[1,0],"14":[1,1],"15":[0,0],"16":[0,0],"17":[1,1,1],"18":[1,0],"19":[1,1],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/services/favourite.service.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/services/favourite.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,4CAA+C;AAC/C,4GAA6E;AAC7E,wEAAgF;AAChF,4CAA6C;AAS7C,MAAM,gBAAgB;IACpB,YAA6B,UAAuB;QAAvB,eAAU,GAAV,UAAU,CAAa;QACpD,WAAM,GAAG,IAAI,mBAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;IADQ,CAAC;IAGxD,KAAK,CAAC,eAAe;QACnB,MAAM,QAAQ,GAAG,0BAAU,CAAC,SAAS,CAAC;QAEtC,MAAM,MAAM,GAAG,uBAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,MAAM,EAAE,CAAC;YACX,MAAM,CAAC,IAAI,CAAC,4BAA4B,EAAE,EAAC,KAAK,EAAE,gDAAgD,EAAC,CAAC,CAAC;YACrG,OAAO,MAAsB,CAAC;QAChC,CAAC;QACD,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;QACjD,uBAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,EAAE,4BAAY,CAAC,KAAK,CAAC,CAAC;QAC1D,MAAM,CAAC,IAAI,CAAC,aAAa,SAAS,CAAC,MAAM,YAAY,CAAC,CAAC;QACvD,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,WAAiC;QACjD,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC9D,IAAI,CAAC,CAAC,QAAQ,YAAY,qBAAY,CAAC,EAAE,CAAC;YACxC,MAAM,CAAC,IAAI,CAAC,WAAW,WAAW,CAAC,IAAI,uBAAuB,CAAC,CAAC;YAChE,OAAO,IAAI,qBAAY,CAAC,8BAA8B,CAAC,CAAC;QAC1D,CAAC;QAED,QAAQ,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAClD,uBAAY,CAAC,mBAAmB,EAAE,CAAA;QAElC,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,SAAiB;QACpC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,MAAM,CAAC,IAAI,CAAC,WAAW,SAAS,yBAAyB,EAAE,EAAC,KAAK,EAAE,gCAAgC,EAAC,CAAC,CAAC;YACtG,OAAO,IAAI,qBAAY,CAAC,gCAAgC,CAAC,CAAC;QAC5D,CAAC;QACD,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACrD,uBAAY,CAAC,mBAAmB,EAAE,CAAA;QAClC,IAAI,IAAI,YAAY,qBAAY,EAAE,CAAC;YACjC,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,SAAiB;QAChC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACrD,OAAO,CAAC,CAAC,IAAI,YAAY,qBAAY,CAAC,CAAC;IACzC,CAAC;CACF;AAED,MAAM,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,oCAAmB,CAAC,CAAC;AACnE,kBAAe,gBAAgB,CAAC","sourcesContent":["import { IFavourite } from \"../interfaces/favourites\";\nimport { IRepository } from \"../interfaces/repository\";\nimport * as Dtos from \"../dtos/favourite.dto\";\nimport { BadException } from \"../utils/errors\";\nimport favoritesRepository from \"../repositories/mongofavourites.repository\";\nimport cacheManager, { CACHE_CONFIG, CACHE_KEYS } from \"../utils/cache-manager\";\nimport { LoggerImpl } from \"../utils/logger\";\n\nexport interface IFavoritesService {\n  getAllFavorites(): Promise<IFavourite[]>;\n  addFavorite(pokemonData: Dtos.AddFavouriteDto): Promise<IFavourite | BadException>;\n  removeFavorite(pokemonId: string): Promise<void | BadException>;\n  isFavorite(pokemonId: string): Promise<boolean>;\n}\n\nclass FavoritesService implements IFavoritesService {\n  constructor(private readonly repository: IRepository) {}\n  logger = new LoggerImpl(FavoritesService.name);\n\n  async getAllFavorites(): Promise<IFavourite[]> {\n    const cacheKey = CACHE_KEYS.FAVORITES;\n    // Check cache first\n    const cached = cacheManager.get(cacheKey);\n    if (cached) {\n      logger.info('Returning cached favorites', {trace: 'src.services.favourite.service.getAllFavorites'});\n      return cached as IFavourite[];\n    }\n    const favorites = await this.repository.getAll();\n    cacheManager.set(cacheKey, favorites, CACHE_CONFIG.SHORT);\n    logger.info(`Retrieved ${favorites.length} favorites`);\n    return favorites;\n  }\n\n  async addFavorite(pokemonData: Dtos.AddFavouriteDto): Promise<IFavourite | BadException> {\n    let favorite = await this.repository.exists(pokemonData.name);\n    if (!(favorite instanceof BadException)) {\n      logger.info(`Pokemon ${pokemonData.name} already in favorites`);\n      return new BadException('Pokemon already in favorites');\n    }\n\n    favorite = await this.repository.add(pokemonData);\n    cacheManager.invalidateFavorites()\n    \n    return favorite;\n  }\n\n  async removeFavorite(pokemonId: string): Promise<void | BadException> {\n    const isFav = await this.isFavorite(pokemonId);\n    if (!isFav) {\n      logger.info(`Pokemon ${pokemonId} not found in favorites`, {trace: 'src.services.favourite.service'});\n      return new BadException('Pokemon not found in favorites');\n    }\n    const resp = await this.repository.remove(pokemonId);\n    cacheManager.invalidateFavorites()\n    if (resp instanceof BadException) {\n      return resp;\n    }\n  }\n\n  async isFavorite(pokemonId: string): Promise<boolean> {\n    const resp = await this.repository.exists(pokemonId);\n    return !(resp instanceof BadException);\n  }\n}\n\nconst favoritesService = new FavoritesService(favoritesRepository);\nexport default favoritesService;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"edc957656c845af1c67ec4c30bfdea3a55032c78","contentHash":"a61fb734603708772f460bddec95fc91491b6075e727c53b6efdee716865aabf"},"/Users/user/Documents/GitHub/firefly/backend/src/repositories/mongofavourites.repository.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/repositories/mongofavourites.repository.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":42}},"4":{"start":{"line":7,"column":27},"end":{"line":7,"column":81}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":43}},"6":{"start":{"line":11,"column":25},"end":{"line":11,"column":75}},"7":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":74}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":24}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":145}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":51}},"12":{"start":{"line":22,"column":8},"end":{"line":22,"column":105}},"13":{"start":{"line":23,"column":8},"end":{"line":23,"column":51}},"14":{"start":{"line":26,"column":26},"end":{"line":30,"column":19}},"15":{"start":{"line":31,"column":8},"end":{"line":31,"column":25}},"16":{"start":{"line":34,"column":25},"end":{"line":37,"column":17}},"17":{"start":{"line":38,"column":8},"end":{"line":38,"column":146}},"18":{"start":{"line":39,"column":8},"end":{"line":39,"column":24}},"19":{"start":{"line":42,"column":23},"end":{"line":42,"column":86}},"20":{"start":{"line":43,"column":8},"end":{"line":46,"column":9}},"21":{"start":{"line":44,"column":12},"end":{"line":44,"column":72}},"22":{"start":{"line":45,"column":12},"end":{"line":45,"column":79}},"23":{"start":{"line":47,"column":8},"end":{"line":47,"column":125}},"24":{"start":{"line":50,"column":0},"end":{"line":50,"column":60}},"25":{"start":{"line":51,"column":28},"end":{"line":51,"column":58}},"26":{"start":{"line":52,"column":0},"end":{"line":52,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":23},"end":{"line":16,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":20},"end":{"line":20,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":15},"end":{"line":24,"column":5}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":19},"end":{"line":32,"column":5}},"line":25},"5":{"name":"(anonymous_5)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":23},"end":{"line":40,"column":5}},"line":33},"6":{"name":"(anonymous_6)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":28},"end":{"line":48,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},{"start":{},"end":{}}],"line":12},"4":{"loc":{"start":{"line":43,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":46,"column":9}},{"start":{},"end":{}}],"line":43}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/repositories/mongofavourites.repository.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/repositories/mongofavourites.repository.ts"],"names":[],"mappings":";;;;;;AAEA,kFAAkD;AAClD,4CAA+C;AAG/C,MAAa,wBAAwB;IAC5B,KAAK,CAAC,MAAM,CAAC,IAAY;QAC9B,MAAM,QAAQ,GAAG,MAAM,0BAAQ,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,OAAO,IAAI,qBAAY,CAAC,2BAA2B,CAAC,CAAC;QACvD,CAAC;QACD,OAAO,QAAQ,CAAC;IAClB,CAAC;IACD,SAAS,CAAC,IAAkC;QAC1C,MAAM,CAAC,IAAI,CAAC,yBAAyB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,EAAE,EAAC,KAAK,EAAE,6CAA6C,EAAC,CAAC,CAAC;QACvI,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC7C,CAAC;IACD,QAAQ;QACN,MAAM,CAAC,IAAI,CAAC,yBAAyB,EAAE,EAAC,KAAK,EAAE,6CAA6C,EAAC,CAAC,CAAC;QAC/F,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC7C,CAAC;IACM,KAAK,CAAC,MAAM;QACjB,MAAM,SAAS,GAAG,MAAM,0BAAQ;aAC3B,IAAI,EAAE;aACN,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;aACvB,MAAM,CAAC,iBAAiB,CAAC;aACzB,IAAI,EAAE,CAAC;QAEV,OAAO,SAAS,CAAC;IACrB,CAAC;IAEM,KAAK,CAAC,GAAG,CAAC,OAA6B;QAC5C,MAAM,QAAQ,GAAG,MAAM,IAAI,0BAAQ,CAAC;YAClC,IAAI,EAAE,OAAO,CAAC,IAAI;YAClB,QAAQ,EAAE,OAAO,CAAC,QAAQ;SAC3B,CAAC,CAAC,IAAI,EAAE,CAAC;QAEV,MAAM,CAAC,IAAI,CAAC,iBAAiB,OAAO,CAAC,IAAI,SAAS,OAAO,CAAC,IAAI,gBAAgB,EAAE,EAAC,KAAK,EAAE,6CAA6C,EAAC,CAAC,CAAC;QACxI,OAAO,QAAQ,CAAC;IAClB,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,SAAiB;QACnC,MAAM,MAAM,GAAG,MAAM,0BAAQ,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC;QAC7D,IAAI,MAAM,CAAC,YAAY,KAAK,CAAC,EAAE,CAAC;YAC9B,MAAM,CAAC,KAAK,CAAC,WAAW,SAAS,yBAAyB,CAAE,CAAC;YAC7D,OAAO,IAAI,qBAAY,CAAC,gCAAgC,CAAC,CAAC;QAC5D,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,mBAAmB,SAAS,iBAAiB,EAAE,EAAC,KAAK,EAAE,6CAA6C,EAAC,CAAC,CAAC;IACrH,CAAC;CACF;AA5CD,4DA4CC;AAED,MAAM,mBAAmB,GAAG,IAAI,wBAAwB,EAAE,CAAC;AAC3D,kBAAe,mBAAmB,CAAC","sourcesContent":["import { IFavourite } from \"../interfaces/favourites\";\nimport { IRepository } from \"../interfaces/repository\";\nimport Favorite from \"../models/favourites.model\";\nimport { BadException } from \"../utils/errors\";\nimport * as Dtos from \"../dtos/favourite.dto\";\n\nexport class MongoFavoritesRepository implements IRepository {\n  public async exists(name: string): Promise<IFavourite | BadException> {\n    const existing = await Favorite.findOne({ name });\n    if (!existing) {\n      return new BadException(\"Favourite does not exist.\");\n    }\n    return existing;\n  }\n  writeData(data: { favorites: IFavourite[]; }): Promise<void> {\n    logger.warn(`Method with argument (${JSON.stringify(data)}) not implemented.`, {trace: 'src.repositories.mongofavourites.repository'});\n    throw new Error(\"Method not implemented.\");\n  }\n  readData(): Promise<any> {\n    logger.warn(`Method not implemented.`, {trace: 'src.repositories.mongofavourites.repository'});\n    throw new Error(\"Method not implemented.\");\n  }\n  public async getAll(): Promise<IFavourite[]> {\n    const favorites = await Favorite\n        .find()\n        .sort({ createdAt: -1 })\n        .select('-__v -updatedAt')\n        .lean();\n      \n      return favorites;\n  }\n\n  public async add(pokemon: Dtos.AddFavouriteDto): Promise<IFavourite> {\n    const favorite = await new Favorite({\n      name: pokemon.name,\n      imageUrl: pokemon.imageUrl\n    }).save();\n    \n    logger.info(`Added Pokemon ${pokemon.name} (ID: ${pokemon.name}) to favorites`, {trace: 'src.repositories.mongofavourites.repository'});\n    return favorite;\n  }\n\n  public async remove(pokemonId: string): Promise<void | BadException> {\n    const result = await Favorite.deleteOne({ name: pokemonId });\n    if (result.deletedCount === 0) {\n      logger.error(`Pokemon ${pokemonId} not found in favorites`,);\n      return new BadException('Pokemon not found in favorites');\n    }\n    logger.info(`Removed Pokemon ${pokemonId} from favorites`, {trace: 'src.repositories.mongofavourites.repository'});\n  }\n}\n\nconst favoritesRepository = new MongoFavoritesRepository();\nexport default favoritesRepository;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c9f19addfa14d9d5279d3f0387cbe9bed2efcf45","contentHash":"13be0f067ffaef4a53b90f2f8fca49d31d6536b0749f70bb270caba123c85fe6"},"/Users/user/Documents/GitHub/firefly/backend/src/models/favourites.model.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/models/favourites.model.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":38}},"4":{"start":{"line":7,"column":31},"end":{"line":7,"column":79}},"5":{"start":{"line":8,"column":41},"end":{"line":8,"column":99}},"6":{"start":{"line":9,"column":23},"end":{"line":23,"column":2}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":49}},"8":{"start":{"line":25,"column":0},"end":{"line":25,"column":39}},"9":{"start":{"line":26,"column":0},"end":{"line":26,"column":57}},"10":{"start":{"line":27,"column":0},"end":{"line":32,"column":3}},"11":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"12":{"start":{"line":29,"column":8},"end":{"line":29,"column":51}},"13":{"start":{"line":31,"column":4},"end":{"line":31,"column":11}},"14":{"start":{"line":33,"column":0},"end":{"line":33,"column":54}},"15":{"start":{"line":34,"column":0},"end":{"line":34,"column":64}},"16":{"start":{"line":35,"column":17},"end":{"line":35,"column":79}},"17":{"start":{"line":36,"column":0},"end":{"line":36,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":27},"end":{"line":27,"column":28}},"loc":{"start":{"line":27,"column":43},"end":{"line":32,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},{"start":{},"end":{}}],"line":28}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":1},"f":{"0":2,"1":0},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/models/favourites.model.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/models/favourites.model.ts"],"names":[],"mappings":";;;;;AAAA,uCAAwD;AACxD,gFAA6C;AAC7C,oGAAuE;AAGvE,MAAM,cAAc,GAAG,IAAI,iBAAM,CAAC;IAChC,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,IAAI;QACf,IAAI,EAAE,IAAI;QACV,KAAK,EAAE,IAAI;KACZ;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,IAAI;KACX;CACF,EAAE;IACD,UAAU,EAAE,IAAI;CACjB,CAAC,CAAC;AAGH,cAAc,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAEjD,cAAc,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;AAEvC,cAAc,CAAC,KAAK,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;AAEzD,cAAc,CAAC,GAAG,CAAC,MAAM,EAAE,UAAS,IAAI;IACtC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;IAC7C,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC,CAAC;AAEH,cAAc,CAAC,MAAM,CAAC,8BAAS,CAAC,CAAC;AACjC,cAAc,CAAC,MAAM,CAAC,wCAAyB,CAAC,CAAC;AAEjD,MAAM,QAAQ,GAAG,IAAA,gBAAK,EAAwC,UAAU,EAAE,cAAc,EAAE,WAAW,CAAC,CAAC;AAEvG,kBAAe,QAAQ,CAAC","sourcesContent":["import { model, Schema, PaginateModel } from \"mongoose\";\nimport paginator from 'mongoose-paginate-v2';\nimport mongooseAggregatePaginate from 'mongoose-aggregate-paginate-v2';\nimport { IFavourite } from \"../interfaces/favourites\";\n\nconst favoriteSchema = new Schema({\n  name: {\n    type: String,\n    required: true,\n    lowercase: true,\n    trim: true,\n    index: true\n  },\n  imageUrl: {\n    type: String,\n    trim: true,\n  }\n}, {\n  timestamps: true\n});\n\n\nfavoriteSchema.index({ name: 1, createdAt: -1 });\n\nfavoriteSchema.index({ name: 'text' });\n\nfavoriteSchema.index({ pokemonId: 1 }, { sparse: true });\n\nfavoriteSchema.pre('save', function(next) {\n  if (this.name) {\n    this.name = this.name.toLowerCase().trim();\n  }\n  next();\n});\n\nfavoriteSchema.plugin(paginator);\nfavoriteSchema.plugin(mongooseAggregatePaginate);\n\nconst Favorite = model<IFavourite, PaginateModel<IFavourite>>('Favorite', favoriteSchema, 'favorites');\n\nexport default Favorite;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"18d936aca6c1f21bb7be4857c0a6b6089b5d69e6","contentHash":"10f03b8e13d0f47ee0414672c8eaf48f44868313506f61366f5ca57820f5cbf3"},"/Users/user/Documents/GitHub/firefly/backend/src/utils/messages.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/utils/messages.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":12,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/utils/messages.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/utils/messages.ts"],"names":[],"mappings":";;AAAA,kBAAe;IACb,qBAAqB,EAAE,iCAAiC;IACxD,iBAAiB,EAAE,oBAAoB;IACvC,eAAe,EAAE,+BAA+B;IAChD,kBAAkB,EAAE,kCAAkC;IACtD,uBAAuB,EAAE,kCAAkC;IAC3D,kBAAkB,EAAE,iCAAiC;IACrD,aAAa,EAAE,6BAA6B;IAC5C,WAAW,EAAE,mCAAmC;CACjD,CAAC","sourcesContent":["export default {\n  INTERNAL_SERVER_ERROR: 'Internal server error occurred.',\n  POKEMON_NOT_FOUND: 'Pokemon not found.',\n  POKEMON_FETCHED: 'Pokemon fetched successfully.',\n  FAVOURITES_FETCHED: 'Favourites fetched successfully.',\n  FAVORITE_ALREADY_EXISTS: 'Pokemon is already in favorites.',\n  FAVORITE_NOT_FOUND: 'Pokemon not found in favorites.',\n  CACHE_CLEARED: 'Cache cleared successfully.',\n  CACHE_STATS: 'Cache stats fetched successfully.',\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9c206749ffd353473f5561a089b7589b2617cd1e","contentHash":"34a08b9ade593da8af23abb16852d596841523e70e42581daea9ca19ce5360cc"},"/Users/user/Documents/GitHub/firefly/backend/src/middleware/rate-limit.middleware.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/rate-limit.middleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":67}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":59}},"5":{"start":{"line":8,"column":28},"end":{"line":8,"column":56}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":52}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":27}},"8":{"start":{"line":13,"column":8},"end":{"line":16,"column":11}},"9":{"start":{"line":17,"column":8},"end":{"line":17,"column":26}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":104}},"11":{"start":{"line":21,"column":26},"end":{"line":21,"column":56}},"12":{"start":{"line":22,"column":19},"end":{"line":24,"column":61}},"13":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"14":{"start":{"line":28,"column":8},"end":{"line":76,"column":10}},"15":{"start":{"line":29,"column":12},"end":{"line":32,"column":13}},"16":{"start":{"line":30,"column":16},"end":{"line":30,"column":110}},"17":{"start":{"line":31,"column":16},"end":{"line":31,"column":30}},"18":{"start":{"line":33,"column":102},"end":{"line":33,"column":108}},"19":{"start":{"line":34,"column":12},"end":{"line":75,"column":13}},"20":{"start":{"line":35,"column":35},"end":{"line":35,"column":58}},"21":{"start":{"line":36,"column":33},"end":{"line":36,"column":52}},"22":{"start":{"line":37,"column":28},"end":{"line":37,"column":65}},"23":{"start":{"line":38,"column":28},"end":{"line":38,"column":38}},"24":{"start":{"line":39,"column":36},"end":{"line":39,"column":50}},"25":{"start":{"line":40,"column":16},"end":{"line":40,"column":151}},"26":{"start":{"line":41,"column":27},"end":{"line":41,"column":46}},"27":{"start":{"line":42,"column":16},"end":{"line":55,"column":17}},"28":{"start":{"line":43,"column":20},"end":{"line":46,"column":22}},"29":{"start":{"line":47,"column":39},"end":{"line":47,"column":65}},"30":{"start":{"line":48,"column":20},"end":{"line":48,"column":58}},"31":{"start":{"line":51,"column":20},"end":{"line":51,"column":33}},"32":{"start":{"line":52,"column":40},"end":{"line":52,"column":60}},"33":{"start":{"line":53,"column":39},"end":{"line":53,"column":68}},"34":{"start":{"line":54,"column":20},"end":{"line":54,"column":58}},"35":{"start":{"line":56,"column":34},"end":{"line":56,"column":71}},"36":{"start":{"line":57,"column":41},"end":{"line":57,"column":81}},"37":{"start":{"line":58,"column":16},"end":{"line":58,"column":75}},"38":{"start":{"line":59,"column":16},"end":{"line":59,"column":77}},"39":{"start":{"line":60,"column":16},"end":{"line":60,"column":80}},"40":{"start":{"line":61,"column":16},"end":{"line":69,"column":17}},"41":{"start":{"line":62,"column":20},"end":{"line":62,"column":78}},"42":{"start":{"line":63,"column":20},"end":{"line":63,"column":165}},"43":{"start":{"line":64,"column":20},"end":{"line":68,"column":23}},"44":{"start":{"line":70,"column":16},"end":{"line":70,"column":23}},"45":{"start":{"line":73,"column":16},"end":{"line":73,"column":60}},"46":{"start":{"line":74,"column":16},"end":{"line":74,"column":23}},"47":{"start":{"line":79,"column":8},"end":{"line":79,"column":37}},"48":{"start":{"line":82,"column":8},"end":{"line":82,"column":30}},"49":{"start":{"line":83,"column":8},"end":{"line":83,"column":90}},"50":{"start":{"line":86,"column":8},"end":{"line":90,"column":9}},"51":{"start":{"line":87,"column":12},"end":{"line":87,"column":31}},"52":{"start":{"line":88,"column":12},"end":{"line":88,"column":31}},"53":{"start":{"line":89,"column":12},"end":{"line":89,"column":87}},"54":{"start":{"line":93,"column":0},"end":{"line":93,"column":34}},"55":{"start":{"line":95,"column":4},"end":{"line":97,"column":6}},"56":{"start":{"line":96,"column":8},"end":{"line":96,"column":79}},"57":{"start":{"line":99,"column":20},"end":{"line":99,"column":37}},"58":{"start":{"line":100,"column":0},"end":{"line":100,"column":34}},"59":{"start":{"line":101,"column":0},"end":{"line":101,"column":55}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":18},"end":{"line":19,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":23},"end":{"line":26,"column":5}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":23},"end":{"line":77,"column":5}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":28,"column":15},"end":{"line":28,"column":16}},"loc":{"start":{"line":28,"column":35},"end":{"line":76,"column":9}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":78,"column":4},"end":{"line":78,"column":5}},"loc":{"start":{"line":78,"column":15},"end":{"line":80,"column":5}},"line":78},"6":{"name":"(anonymous_6)","decl":{"start":{"line":81,"column":4},"end":{"line":81,"column":5}},"loc":{"start":{"line":81,"column":12},"end":{"line":84,"column":5}},"line":81},"7":{"name":"(anonymous_7)","decl":{"start":{"line":85,"column":4},"end":{"line":85,"column":5}},"loc":{"start":{"line":85,"column":12},"end":{"line":91,"column":5}},"line":85},"8":{"name":"createRateLimitMiddleware","decl":{"start":{"line":94,"column":9},"end":{"line":94,"column":34}},"loc":{"start":{"line":94,"column":48},"end":{"line":98,"column":1}},"line":94},"9":{"name":"(anonymous_9)","decl":{"start":{"line":95,"column":11},"end":{"line":95,"column":12}},"loc":{"start":{"line":95,"column":38},"end":{"line":97,"column":5}},"line":95}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":22,"column":19},"end":{"line":24,"column":61}},"type":"cond-expr","locations":[{"start":{"line":23,"column":14},"end":{"line":23,"column":44}},{"start":{"line":24,"column":14},"end":{"line":24,"column":61}}],"line":22},"4":{"loc":{"start":{"line":24,"column":14},"end":{"line":24,"column":61}},"type":"binary-expr","locations":[{"start":{"line":24,"column":14},"end":{"line":24,"column":20}},{"start":{"line":24,"column":24},"end":{"line":24,"column":48}},{"start":{"line":24,"column":52},"end":{"line":24,"column":61}}],"line":24},"5":{"loc":{"start":{"line":29,"column":12},"end":{"line":32,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":32,"column":13}},{"start":{},"end":{}}],"line":29},"6":{"loc":{"start":{"line":33,"column":43},"end":{"line":33,"column":97}},"type":"default-arg","locations":[{"start":{"line":33,"column":53},"end":{"line":33,"column":97}}],"line":33},"7":{"loc":{"start":{"line":36,"column":33},"end":{"line":36,"column":52}},"type":"binary-expr","locations":[{"start":{"line":36,"column":33},"end":{"line":36,"column":41}},{"start":{"line":36,"column":45},"end":{"line":36,"column":52}}],"line":36},"8":{"loc":{"start":{"line":42,"column":16},"end":{"line":55,"column":17}},"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":55,"column":17}},{"start":{"line":50,"column":21},"end":{"line":55,"column":17}}],"line":42},"9":{"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":50}},"type":"binary-expr","locations":[{"start":{"line":42,"column":20},"end":{"line":42,"column":25}},{"start":{"line":42,"column":29},"end":{"line":42,"column":50}}],"line":42},"10":{"loc":{"start":{"line":61,"column":16},"end":{"line":69,"column":17}},"type":"if","locations":[{"start":{"line":61,"column":16},"end":{"line":69,"column":17}},{"start":{},"end":{}}],"line":61},"11":{"loc":{"start":{"line":86,"column":8},"end":{"line":90,"column":9}},"type":"if","locations":[{"start":{"line":86,"column":8},"end":{"line":90,"column":9}},{"start":{},"end":{}}],"line":86},"12":{"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":33}},"type":"default-arg","locations":[{"start":{"line":95,"column":24},"end":{"line":95,"column":33}}],"line":95}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":3,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1,"55":1,"56":3,"57":1,"58":1,"59":1},"f":{"0":1,"1":1,"2":0,"3":3,"4":0,"5":0,"6":0,"7":0,"8":1,"9":3},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/middleware/rate-limit.middleware.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/middleware/rate-limit.middleware.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport NodeCache from \"node-cache\";\nimport { StatusCodes } from 'http-status-codes';\nimport { rateLimitConfig } from '../config/rate-limit';\n\n// Define rate limit configurations by endpoint\ntype RateLimitConfig = {\n  windowMs: number;\n  maxRequests: number;\n  message?: string;\n};\n\ninterface RateLimitData {\n  count: number;\n  resetTime: number;\n}\n\n// Rate limiter using node-cache\nexport class RateLimiter {\n  private cache: NodeCache;\n  private ready: boolean = false;\n\n  constructor() {\n    // Initialize cache without stdTTL since we'll manage expiry per-key\n    this.cache = new NodeCache({ \n      checkperiod: 60,\n      useClones: false\n    });\n    this.ready = true;\n    \n    logger.info('Rate limiter initialized with node-cache', {trace: 'ratelimiter.middleware.ts'});\n  }\n\n  // Get user identifier from request (IP address)\n  private getIdentifier(req: Request): string {\n    // Try multiple methods to get IP address\n    const forwarded = req.headers['x-forwarded-for'];\n    const ip = typeof forwarded === 'string' \n      ? forwarded.split(',')[0].trim()\n      : req.ip || req.socket.remoteAddress || 'unknown';\n    \n    return `ip:${ip}`;\n  }\n\n  // Create middleware for a specific route with its own config\n  public limitRoute(config: RateLimitConfig) {\n    return (req: Request, res: Response, next: NextFunction) => {\n      if (!this.ready) {\n        logger.warn('Rate limiter not ready, skipping check', {trace: 'ratelimiter.middleware.ts'});\n        return next();\n      }\n\n      const { \n        windowMs, \n        maxRequests, \n        message = 'Too many requests, please try again later.' \n      } = config;\n      \n      try {\n        const identifier = this.getIdentifier(req);\n        const endpoint = req.path || req.url; // Use path for cleaner keys\n        const key = `ratelimit:${endpoint}:${identifier}`;\n        \n        const now = Date.now();\n        const windowStart = now - windowMs;\n        logger.info(`Rate limiting check for ${identifier} on ${endpoint}: starting (${windowStart})`, {trace: 'ratelimiter.middleware.ts'});\n        \n        // Get existing data or create new\n        let data = this.cache.get<RateLimitData>(key);\n        \n        if (!data || data.resetTime <= now) {\n          // Create new window\n          data = {\n            count: 1,\n            resetTime: now + windowMs\n          };\n          \n          // Set cache with TTL in seconds\n          const ttlSeconds = Math.ceil(windowMs / 1000);\n          this.cache.set(key, data, ttlSeconds);\n        } else {\n          // Increment count in existing window\n          data.count++;\n          \n          // Calculate remaining TTL\n          const remainingMs = data.resetTime - now;\n          const ttlSeconds = Math.ceil(remainingMs / 1000);\n          \n          this.cache.set(key, data, ttlSeconds);\n        }\n\n        const remaining = Math.max(0, maxRequests - data.count);\n        const resetTimeSeconds = Math.ceil((data.resetTime - now) / 1000);\n        \n        // Set rate limit headers\n        res.setHeader('X-RateLimit-Limit', maxRequests.toString());\n        res.setHeader('X-RateLimit-Remaining', remaining.toString());\n        res.setHeader('X-RateLimit-Reset', resetTimeSeconds.toString());\n        \n        // Check if limit exceeded\n        if (data.count > maxRequests) {\n          res.setHeader('Retry-After', resetTimeSeconds.toString());\n          \n          logger.warn(\n            `Rate limit exceeded for ${identifier} on ${endpoint}. Count: ${data.count}/${maxRequests}`,\n            {trace: 'ratelimiter.middleware.ts'}\n          );\n          \n          return res.status(StatusCodes.TOO_MANY_REQUESTS).json({\n            error: 'Too Many Requests',\n            message,\n            retryAfter: resetTimeSeconds\n          });\n        }\n        \n        next();\n      } catch (error) {\n        logger.error('Rate limiting error:', error);\n        next();\n      }\n    };\n  }\n\n  public getStats() {\n    return this.cache.getStats();\n  }\n\n  public clear() {\n    this.cache.flushAll();\n    logger.info('Rate limiter cache cleared', {trace: 'ratelimiter.middleware.ts'});\n  }\n\n  public close() {\n    if (this.ready) {\n      this.cache.close();\n      this.ready = false;\n      logger.info('Rate limiter closed', {trace: 'ratelimiter.middleware.ts'});\n    }\n  }\n}\n\nfunction createRateLimitMiddleware(rateLimiter: RateLimiter) {\n  return (configKey: keyof typeof rateLimitConfig = 'default') => {\n    return rateLimiter.limitRoute(rateLimitConfig[configKey]);\n  };\n}\n\n// Singleton instance\nconst rateLimiter = new RateLimiter();\n\nexport const limit = createRateLimitMiddleware(rateLimiter);\n\n// Export instance for testing and monitoring\nexport { rateLimiter };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fbf2c7c40b04a3c362792cfc5a47c7746aedada0","contentHash":"a68204e9a6fca8eea24fba9edd301616bce4f89e42c015349cf0eb9e47406d9e"},"/Users/user/Documents/GitHub/firefly/backend/src/config/rate-limit.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/rate-limit.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":19,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/rate-limit.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/rate-limit.ts"],"names":[],"mappings":";;;AAAa,QAAA,eAAe,GAAG;IAC7B,OAAO,EAAE;QACP,QAAQ,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;QACxB,WAAW,EAAE,GAAG;QAChB,OAAO,EAAE,gCAAgC;KAC1C;IACD,MAAM,EAAE;QACN,QAAQ,EAAE,EAAE,GAAG,IAAI;QACnB,WAAW,EAAE,EAAE;QACf,OAAO,EAAE,kBAAkB;KAC5B;IACD,GAAG,EAAE;QACH,QAAQ,EAAE,EAAE,GAAG,IAAI;QACnB,WAAW,EAAE,EAAE;KAChB;CACF,CAAC","sourcesContent":["export const rateLimitConfig = {\n  default: {\n    windowMs: 15 * 60 * 1000, // 15 minutes\n    maxRequests: 100,\n    message: 'Too many requests from this IP'\n  },\n  strict: {\n    windowMs: 60 * 1000, // 1 minute\n    maxRequests: 10,\n    message: 'Please slow down'\n  },\n  api: {\n    windowMs: 60 * 1000,\n    maxRequests: 60\n  }\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bda2d1a158ebacd42b15c727cf6c4657f476025e","contentHash":"564848649b5d42f14f6358922161753b52cf67a13d88e1868e391e9fc5452ebd"},"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/cache.routes.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/cache.routes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":33},"end":{"line":7,"column":83}},"5":{"start":{"line":8,"column":27},"end":{"line":8,"column":89}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":118}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":115}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/cache.routes.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/routes/v1/cache.routes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,oFAA+E;AAC/E,0FAAiE;AAEjE,MAAM,WAAW,GAAG,IAAA,gBAAM,GAAE,CAAC;AAE7B,WAAW,CAAC,GAAG,CAAC,GAAG,EACf,IAAA,6CAAoB,EAAC,0BAAe,CAAC,gBAAgB,CAAC,CACzD,CAAC;AACF,WAAW,CAAC,MAAM,CAAC,GAAG,EAClB,IAAA,6CAAoB,EAAC,0BAAe,CAAC,UAAU,CAAC,CACnD,CAAC;AAEF,kBAAe,WAAW,CAAC","sourcesContent":["import { Router } from \"express\";\nimport { WatchAsyncController } from \"../../middleware/watch-async-controller\";\nimport cacheController from \"../../controllers/cache.controller\";\n\nconst cacheRouter = Router();\n\ncacheRouter.get('/', \n    WatchAsyncController(cacheController.getAllCacheStats)\n);\ncacheRouter.delete('/', \n    WatchAsyncController(cacheController.flushCache)\n);\n\nexport default cacheRouter;\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"488f11fa1346fc5a01bff083c5b62539475cbf6b","contentHash":"7275f24af3851a51182526bd7c1df3467e0bd6d7758cbd482be4f8910f686689"},"/Users/user/Documents/GitHub/firefly/backend/src/controllers/cache.controller.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/controllers/cache.controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":28},"end":{"line":6,"column":56}},"4":{"start":{"line":7,"column":24},"end":{"line":7,"column":74}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":47}},"6":{"start":{"line":9,"column":19},"end":{"line":9,"column":64}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":43}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":41}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":68}},"10":{"start":{"line":15,"column":8},"end":{"line":19,"column":10}},"11":{"start":{"line":16,"column":26},"end":{"line":16,"column":54}},"12":{"start":{"line":17,"column":12},"end":{"line":17,"column":49}},"13":{"start":{"line":18,"column":12},"end":{"line":18,"column":133}},"14":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"15":{"start":{"line":21,"column":12},"end":{"line":21,"column":38}},"16":{"start":{"line":22,"column":12},"end":{"line":22,"column":54}},"17":{"start":{"line":23,"column":12},"end":{"line":23,"column":128}},"18":{"start":{"line":27,"column":24},"end":{"line":27,"column":68}},"19":{"start":{"line":28,"column":0},"end":{"line":28,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":30},"end":{"line":25,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":32},"end":{"line":15,"column":33}},"loc":{"start":{"line":15,"column":53},"end":{"line":19,"column":9}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":26},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":47},"end":{"line":24,"column":9}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":1,"19":1},"f":{"0":2,"1":1,"2":0,"3":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/controllers/cache.controller.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/controllers/cache.controller.ts"],"names":[],"mappings":";;;;;AAAA,yDAAgD;AAEhD,2EAAoE;AACpE,gDAAgD;AAChD,iEAAyC;AACzC,4CAA6C;AAE7C,MAAM,eAAe;IACjB,YAA6B,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;QACvD,WAAM,GAAG,IAAI,mBAAU,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QACvC,qBAAgB,GAAc,KAAK,EAAC,IAAI,EAAE,GAAG,EAAE,EAAE;YACpD,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;YAC3C,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YACrC,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,IAAI,EAAE,kBAAQ,CAAC,WAAW,EAAE,+BAAW,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QAC/E,CAAC,CAAA;QACM,eAAU,GAAc,KAAK,EAAC,IAAI,EAAE,GAAG,EAAE,EAAE;YAC9C,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;YAC5C,OAAO,IAAA,sBAAW,EAAC,GAAG,EAAE,IAAI,EAAE,kBAAQ,CAAC,aAAa,EAAE,+BAAW,CAAC,EAAE,CAAC,CAAC;QAC1E,CAAC,CAAA;IAXyD,CAAC;CAY9D;AAED,MAAM,eAAe,GAAG,IAAI,eAAe,CAAC,uBAAY,CAAC,CAAC;AAC1D,kBAAe,eAAe,CAAC","sourcesContent":["import { StatusCodes } from \"http-status-codes\";\nimport { fnRequest } from \"../types\";\nimport cacheManager, { CacheManager } from \"../utils/cache-manager\";\nimport { ApiResponse } from \"../utils/response\";\nimport Messages from \"../utils/messages\";\nimport { LoggerImpl } from \"../utils/logger\";\n\nclass CacheController {\n    constructor(private readonly cacheManager: CacheManager) {}\n    logger = new LoggerImpl(CacheController.name);\n    public getAllCacheStats: fnRequest = async(_req, res) => {\n        const stats = this.cacheManager.getStats();\n        logger.info('Cache stats retrieved');\n        return ApiResponse(res, null, Messages.CACHE_STATS, StatusCodes.OK, stats);\n    }\n    public flushCache: fnRequest = async(_req, res) => {\n        this.cacheManager.flush();\n          logger.info('Cache flushed successfully');\n        return ApiResponse(res, null, Messages.CACHE_CLEARED, StatusCodes.OK);\n    }\n}\n\nconst cacheController = new CacheController(cacheManager);\nexport default cacheController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f32c765d4e46bb6c17954ea2daaa3464b8c5be2a","contentHash":"7a663cfb2d000fba5c3d3b546c6d439dca04732df11a2b1246511270fff7a9c6"},"/Users/user/Documents/GitHub/firefly/backend/src/config/cors.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/config/cors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":65}},"3":{"start":{"line":5,"column":18},"end":{"line":13,"column":1}},"4":{"start":{"line":6,"column":26},"end":{"line":6,"column":86}},"5":{"start":{"line":6,"column":63},"end":{"line":6,"column":85}},"6":{"start":{"line":7,"column":4},"end":{"line":12,"column":5}},"7":{"start":{"line":8,"column":8},"end":{"line":8,"column":29}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":51}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":18},"end":{"line":5,"column":19}},"loc":{"start":{"line":5,"column":40},"end":{"line":13,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":52},"end":{"line":6,"column":53}},"loc":{"start":{"line":6,"column":63},"end":{"line":6,"column":85}},"line":6}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":26},"end":{"line":6,"column":86}},"type":"binary-expr","locations":[{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},{"start":{"line":6,"column":37},"end":{"line":6,"column":86}}],"line":6},"1":{"loc":{"start":{"line":7,"column":4},"end":{"line":12,"column":5}},"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":12,"column":5}},{"start":{"line":10,"column":9},"end":{"line":12,"column":5}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/config/cors.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/config/cors.ts"],"names":[],"mappings":";;;AAAA,MAAM,SAAS,GAAG,CAAC,WAAW,EAAE,gCAAgC,CAAC,CAAC;AAElE,MAAM,SAAS,GAAG,CAAC,MAA0B,EAAE,QAAsD,EAAE,EAAE;IACrG,MAAM,aAAa,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;IACnF,IAAI,aAAa,EAAE,CAAC;QAChB,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACzB,CAAC;SAAM,CAAC;QACJ,QAAQ,CAAC,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC;IAC/C,CAAC;AACL,CAAC,CAAC;AAEW,QAAA,WAAW,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC","sourcesContent":["const whitelist = [\"localhost\", \"firefly-pokeman-sec.vercel.app\"];\n\nconst getOrigin = (origin: string | undefined, callback: (err: Error | null, allow?: boolean) => void) => {\n    const allowedOrigin = !origin || whitelist.some((value) => origin.includes(value));\n    if (allowedOrigin) {\n        callback(null, true);\n    } else {\n        callback(new Error(\"Not allowed by CORS\"));\n    }\n};\n\nexport const corsOptions = { origin: getOrigin };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ad4f6b1d26d5f0f296830b9dfc95b0b127291ca1","contentHash":"4760a3d15690006555ba75ef8235f99c85e2cdfea5b317113f3b28601927f683"},"/Users/user/Documents/GitHub/firefly/backend/src/helper/scheduler.ts":{"path":"/Users/user/Documents/GitHub/firefly/backend/src/helper/scheduler.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":20},"end":{"line":6,"column":57}},"4":{"start":{"line":7,"column":24},"end":{"line":7,"column":74}},"5":{"start":{"line":8,"column":0},"end":{"line":11,"column":3}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":55}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":53}},"8":{"start":{"line":12,"column":0},"end":{"line":15,"column":3}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":60}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":44},"end":{"line":8,"column":45}},"loc":{"start":{"line":8,"column":50},"end":{"line":11,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":42},"end":{"line":12,"column":43}},"loc":{"start":{"line":12,"column":48},"end":{"line":15,"column":1}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":1,"9":0,"10":0},"f":{"0":2,"1":0,"2":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/Users/user/Documents/GitHub/firefly/backend/src/helper/scheduler.ts","sources":["/Users/user/Documents/GitHub/firefly/backend/src/helper/scheduler.ts"],"names":[],"mappings":";;;;;AAAA,0DAA6B;AAC7B,2EAAkD;AAGlD,mBAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;IAChC,uBAAY,CAAC,wBAAwB,EAAE,CAAC;IACxC,MAAM,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC;AACnD,CAAC,CAAC,CAAC;AAGH,mBAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE;IAC9B,uBAAY,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;IAC7C,MAAM,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;AAChD,CAAC,CAAC,CAAC","sourcesContent":["import cron from 'node-cron';\nimport cacheManager from '../utils/cache-manager';\n\n// Clear all Pokemon details cache every 6 hours\ncron.schedule('0 */6 * * *', () => {\n  cacheManager.invalidatePokemonDetails();\n  logger.info('Pokemon details cache invalidated');\n});\n\n// Clear list cache every hour\ncron.schedule('0 * * * *', () => {\n  cacheManager.deletePattern('pokemon:list:*');\n  logger.info('Pokemon list cache invalidated');\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7be2b9eee85461490219c2329e49df83da3acd6b","contentHash":"db8dcdf4d03a74b14db50c5afd2f4115aa981a977d22498605c299059aebf159"}}